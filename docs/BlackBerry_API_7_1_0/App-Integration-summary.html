<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Mon Jul 28 14:36:56 EDT 2008 -->
<TITLE>
BlackBerry Java SDK 7.0 API Reference: Application Integration
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="stylesheet.css" TITLE="Style">

<script type="text/javascript">
<!--
// switchMenu - Expand or collapse a code sample div. Takes two arguments:
// divSample, the id of the div to expand, divList
function switchMenu(divSample, sourceLink) {
	var el = document.getElementById(divSample).style;
	if (el.display == 'none') {
		el.display = 'block';
		sourceLink.className = 'explink_minus';
	} else {
		el.display = 'none';
		sourceLink.className = 'explink_plus';
	}
}

// collapseAll - Collapses all expandable divs and adds the + graphic automatically when the page loads.
// This is done so that users who do not have JS enabled can still see the code samples.
function collapseAll() {
	// Collapse all expandable divs
	var divsOnPage = document.getElementsByTagName('div');
	for (var x = 0; x < divsOnPage.length; x++) {
		if (divsOnPage[x].id.substr(0,3) == "AI_") {
			divsOnPage[x].style.display = 'none';
		}
	}

	// Change all the expand/collapse links to hlink_plus, to show a plus sign beside it
	var linksOnPage = document.getElementsByTagName('a');
	for (var y = 0; y < linksOnPage.length; y++) {
		if (linksOnPage[y].className == "explink") {
			linksOnPage[y].className = "explink_plus";
		}
	}
}
//-->
</script>
<style type="text/css">
<!--
.style4 {font-size: 100%; margin-top: 0cm; margin-bottom: +0.4em}
.style5 {font-size: 100%; margin-top: 0cm; margin-bottom: 0em}
-->
</style>
</HEAD>
<BODY BGCOLOR="white" onLoad="collapseAll();">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev">    <FONT CLASS="NavBarFont1Rev">Package</FONT>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev">    <FONT CLASS="NavBarFont1Rev">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="App-Integration-summary.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->
<HR>
<FORM action="https://www.blackberry.com/DocsFeedback/" method="GET" target="_new">
<INPUT type="hidden" name="title" value="API Reference">
<INPUT type="hidden" name="source" value="External">

<INPUT type="hidden" name="version" value="7.0.0">
<INPUT type="hidden" name="classname" value="Application Integration overview">
<INPUT type="submit" value="Submit Feedback" /></FORM>

<BR>


<h1 align="center">Application Integration <a name="TOP"></a></h1>

<p>This category contains the packages that you can use to integrate your applications with the BlackBerry Device Software applications, such as the contacts application, the phone application, and the media application.</p>
<ul>
  <li><a href="#LaunchOthers">Invoking BlackBerry Device Software applications from your application </a></li>
  <li><a href="#LaunchSelf">Enabling BlackBerry Device Software applications to invoke your application </a></li>
  <li><a href="#EmbedSelf">Embedding content in BlackBerry Device Software applications </a></li>
  <li><a href="#EmbedOther">Embedding BlackBerry Device Software UI components in your application </a></li>
  <li><a href="#PIM_listeners">Accessing data on a BlackBerry device </a></li>
</ul>
<h2>Invoking  BlackBerry Device Software applications from your application  <a name="LaunchOthers"></a> <a href="#TOP" class="backtotop">[back to top]</a></h2>

<ul>
  <li><a href="#AI_INVOKE">Using the Invoke API</a></li>
  <li><a href="#AI_CHAPI">Using the Content Handler API</a></li>
  <li><a href="#AI_BB">Invoking the BlackBerry Browser</a></li>
  <li> <a href="#AI_AppMan">Using the Application Manager</a>   </li>
</ul>
<h3>Using the Invoke API <a name="AI_INVOKE"></a></h3>
<p>Package: <span class="style2"><a href="net/rim/blackberry/api/invoke/package-summary.html">net.rim.blackberry.api.invoke</a></span> 
<p>You can use the BlackBerry <a href="net/rim/blackberry/api/invoke/Invoke.html">Invoke</a> API to invoke BlackBerry Device  Software applications and optionally pass in data. To use this API, invoke  <span class="style2"><a href="net/rim/blackberry/api/invoke/Invoke.html#invokeApplication(int, net.rim.blackberry.api.invoke.ApplicationArguments)">invokeApplication()</a></span> and pass in the application type and any relevant arguments. You can use the Invoke API to invoke the following BlackBerry Device Software applications: </p>
<ul>
  <li>contacts</li>
  <li> calculator</li>
  <li> calendar</li>
  <li> camera</li>
  <li> BlackBerry Maps</li>
  <li> memos</li>
  <li> messages</li>
  <li> phone</li>
  <li> search</li>
  <li> tasks 
</ul>
<p><a href="net/rim/blackberry/api/invoke/Invoke.html#field_summary">Invoke</a> contains APP_TYPE fields that enumerate the applications.</p>

<p>For each BlackBerry Device Software application that can be invoked with the Invoke API, there is a corresponding subclass of the <a href="net/rim/blackberry/api/invoke/ApplicationArguments.html" class="style2">ApplicationArguments</a> class. For example, to invoke the phone application, you can invoke <span class="style2">invokeApplication()</span> and pass in the phone application type and a <span class="style2"><a href="net/rim/blackberry/api/invoke/PhoneArguments.html">PhoneArguments</a></span> argument. To invoke an application with no arguments, you can pass in <span class="style2">null</span> instead of an <span class="style2">ApplicationArguments</span> object.
<p><a class="explink" onClick="switchMenu('AI_0', this);">Click for code sample: Invoke the phone application on a BlackBerry device </a>
<div id="AI_0" class="codesample">
<table cellspacing="0" class="codesample" width="75%">
    <tr>
      <td><pre>// A menu item to make a phone call
MenuItem menu1 = new MenuItem("Make phone call",1,1) 
{
    public void run () 
    {
        //Get the value that the user entered
        String phoneNum = _phonefield.getText(); // _phonefield is an EditField
        Invoke.invokeApplication(Invoke.APP_TYPE_PHONE,
            new PhoneArguments(PhoneArguments.ARG_CALL, phoneNum));
    }
};
</pre></td>
</tr>
</table>
</div>

<p><a class="explink" onClick="switchMenu('AI_1', this);">Click for code sample: Invoke the contacts application on a BlackBerry device </a>
<div id="AI_1" class="codesample">
<table cellspacing="0" class="codesample" width="75%">
    <tr>
      <td><pre>// A menu item that invokes the contacts application to add a new contact
MenuItem menu2 = new MenuItem("Create contact",2,2) 
{
    public void run () 
    {
        Invoke.invokeApplication(Invoke.APP_TYPE_ADDRESSBOOK,
            new AddressBookArguments(AddressBookArguments.ARG_NEW));
    }
};
</pre></td>
</tr>
</table>
</div>

<h3>Using the Content Handler API <a name="AI_CHAPI" id="AI_CHAPI"></a></h3>
<p>Packages:	<span class="style2"><a href="javax/microedition/content/package-summary.html">javax.microedition.content</a>,     <a href="net/rim/device/api/content/package-summary.html">net.rim.device.api.content</a></span></p>
<p>You can use the Content Handler API (CHAPI) to invoke BlackBerry Device Software applications and third-party applications. JSR 211 defines CHAPI as  a Java ME optional API. For general information about CHAPI, see the <a href="javax/microedition/content/package-summary.html" class="style2">javax.microedition.content</a> package overview. </p>
<p>To use CHAPI to invoke applications, you can provide a URL, a content type, or a content ID with one of the constructors in the <a href="javax/microedition/content/Invocation.html" class="style2">javax.microedition.content.Invocation</a> class. When you use CHAPI with the RIM provided content IDs for invoking RIM content handlers, CHAPI can be a good way to set invocation parameters for BlackBerry Device Software applications, including the media application.</p>
<p>You can also use CHAPI to invoke third-party applications that register as content handlers. </p>
<p><a class="explink" onClick="switchMenu('AI_3', this);">Click for code sample: Start the media application on a BlackBerry device to view the picture library by using CHAPI</a></p>
<div id="AI_3", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>Registry registry = Registry.getRegistry(MyApplication.class.getName());
Invocation invocation = 
    new Invocation(null, 
                   null, 
                   BlackBerryContentHandler.ID_MEDIA_CONTENT_HANDLER,  
                   false, 
                   ContentHandler.ACTION_OPEN);
 
invocation.setArgs(new String[] 
    {BlackBerryContentHandler.MEDIA_ARGUMENT_VIEW_PICTURES});
 
registry.invoke(invocation);</pre></td>
  </tr>
</table>
</div>
<p>For more information about invoking the  media application on a BlackBerry device, see the <em>BlackBerry Java Application Multimedia Development Guide</em>. </p>
<p>To see a sample application that demonstrates how to use CHAPI to register and invoke a third-party application, see the CHAPIDemo sample application that is provided with the BlackBerry&reg; Java&reg; Development Environment. </p>
<h3>Invoking the BlackBerry Browser<a name="AI_BB"></a></h3>
<p>Package: <span class="style2"><a href="net/rim/blackberry/api/browser/package-summary.html">net.rim.blackberry.api.browser</a></span></p>
<p>You can invoke the BlackBerry Browser and open a web page by using the methods in the <a href="net/rim/blackberry/api/browser/Browser.html" class="style2">Browser</a> class and the <a href="net/rim/blackberry/api/browser/BrowserSession.html" class="style2">BrowserSession</a> class. For example: </p>
<table class="codesample" cellspacing="0">
  <tr>
    <td><pre>BrowserSession bSession = Browser.getDefaultSession();
bSession.displayPage("http://www.blackberry.com");</pre></td>
  </tr>
</table>

<p>For more information  about invoking a browser on a BlackBerry device, including how to invoke a browser that is not specified as the default browser, see the BlackBerry Developer Knowledge Base article <a href="http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800440/How_To_-_Invoke_the_browser.html?nodeid=1487366&vernum=0">DB-00701</a>. </p>
<p><strong>Note:</strong> You can also embed web content in your application by using the <span class="style2">BrowserField</span> class. For more information, see <a href="#Browserfield">Browser field</a>. </p>

<h3>Using the Application Manager  <a name="AI_AppMan"></a></h3>
<p>Package: <span class="style2"><a href="net/rim/device/api/system/package-summary.html">net.rim.device.api.system</a></span>
<p>You can start a BlackBerry Device Software application by using the <span class="style2"><a href="net/rim/device/api/system/ApplicationManager.html">ApplicationManager</a></span> class and specifying the code module of the application. Use this technique only if the application cannot be invoked by using any of the techniques described above. You cannot pass application arguments to a BlackBerry Device Software application by using this technique. You can use <span class="style2">ApplicationManager</span> to invoke the following BlackBerry Device Software applications:</p>

<table class="Small" width="448" CELLPADDING="3" CELLSPACING="0" summary="Table listing BlackBerry Device Software applications to invoke using ApplicationManager">
  
  <tr class="TableHeadingColor">
    <th width="175" scope="col">Application </th>
    <th width="257" scope="col">Module name</th>
  </tr>
  <tr>
    <td valign="top">clock</td>
    <td valign="top">net_rim_bb_clock</td>
  </tr>
  <tr>
    <td valign="top">sounds</td>
    <td valign="top">net_rim_bb_profiles_app</td>
  </tr>
  <tr>
    <td valign="top">BlackBerry Messenger</td>
    <td valign="top">net_rim_bb_qm_peer</td>
  </tr>
  <tr>
    <td valign="top">options</td>
    <td valign="top">net_rim_bb_options_app</td>
  </tr>
</table>
<p><strong>Note: </strong>The module names for BlackBerry Device Software applications are subject to change. Invoking modules directly can have unintended side-effects. </p>

<p>For more information about the Application Manager, see <a href="AppLifecycle-summary.html">Application Life Cycle</a>. </p>
<h2>Enabling BlackBerry Device Software applications to invoke your application <a name="LaunchSelf"></a> <a href="#TOP" class="backtotop">[back to top]</a></h2>


<ul>
  <li><a href="#AI_MENU">Adding menu items to a BlackBerry Device Software application</a> </li>
  <li><a href="#Pattern_matching">Matching string patterns in active fields </a>  </li>
  <li><a href="#AI_CHAPI2">Registering content handlers that invoke your application</a></li>
</ul>

<h3>Adding  menu items to a BlackBerry Device Software application <a name="AI_MENU" id="AI_MENU"></a></h3>
<p>Package:	<span class="style2"><a href="net/rim/blackberry/api/menuitem/package-summary.html">net.rim.blackberry.api.menuitem</a></span></p>
<p>You can  add menu items to a BlackBerry Device Software application by using the <span class="style2">net.rim.blackberry.api.menuitem</span> package. For example, you can add a menu item called View Sales Order to the contacts application on a BlackBerry device. When the user clicks View Sales Order, your application opens and displays a list of sales orders for that contact.
<p>The <span class="style2"><a href="net/rim/blackberry/api/menuitem/ApplicationMenuItemRepository.html">ApplicationMenuItemRepository</a></span> class provides the constants that specify the BlackBerry Device Software application that your menu item appears in. For example, the <span class="style2">MENUITEM_MESSAGE_LIST</span> constant specifies that the menu item appears in the messages application. The <span class="style2">MENUITEM_SYSTEM</span> constant specifies that your menu item appears in most BlackBerry Device Software applications.
<p>When you create an instance of the <span class="style2"><a href="net/rim/blackberry/api/menuitem/ApplicationMenuItem.html">ApplicationMenuItem</a></span> class, you can specify the position of the item on the menu. Positions are relative. A lower number corresponds to a higher position on the menu. A separator line is drawn for every 0x10000 increment. Use the following guidelines when you specify the position of an item on the menu.</p>
<table class="Small" width="678" CELLPADDING="3" CELLSPACING="0" summary="Table listing BlackBerry Device Software applications to invoke using ApplicationManager">
  
  <tr class="TableHeadingColor">
    <th width="182" scope="col">Position </th>
    <th width="480" scope="col">Description</th>
  </tr>
  <tr>
    <td valign="top">0x00000-0x22FFFF</td>
    <td valign="top">used by BlackBerry Device Software applications</td>
  </tr>
  <tr>
    <td valign="top">0x230000-0x99FFFF</td>
    <td valign="top">mostly  unused, a good place for your menu items</td>
  </tr>
  <tr>
    <td valign="top">0x1000000-0x104FFFF</td>
    <td valign="top">used by BlackBerry Device Software applications</td>
  </tr>
  <tr>
    <td valign="top">0x1050000-0x1000FFFF </td>
    <td valign="top">mostly  unused, a good place for your menu items</td>
  </tr>
  <tr>
    <td valign="top">0x10010000-0x1001FFFF</td>
    <td valign="top">used by BlackBerry Device Software applications</td>
  </tr>
  <tr>
    <td valign="top">0x10020000-0x7FFFFFFF</td>
    <td valign="top">not recommended for your use</td>
  </tr>
</table>
<p>When an <span class="style2">ApplicationMenuItem</span> is invoked, the BlackBerry Device Software application passes a context object to your application as follows:</p>
<table class="Small" width="680" CELLPADDING="3" CELLSPACING="0" summary="Table listing BlackBerry Device Software applications to invoke using ApplicationManager">
  
  <tr class="TableHeadingColor">
    <th width="183" scope="col">Application</th>
    <th width="481" scope="col">Context object </th>
  </tr>
  <tr>
    <td valign="top">contacts</td>
    <td valign="top"><span class="style2">BlackBerryContact</span> or <span class="style2">BlackBerryContactGroup</span> </td>
  </tr>
  <tr>
    <td valign="top">browser</td>
    <td valign="top"><span class="style2">String</span> for URL of current page</td>
  </tr>
  <tr>
    <td valign="top">calendar</td>
    <td valign="top" class="style2">BlackBerryEvent</td>
  </tr>
  <tr>
    <td valign="top">messages</td>
    <td valign="top"><p class="style4"><span class="style2">net.rim.blackberry.api.mail.Message</span> for email messages and PIN messages</span></p>
      <p class="style4"><span class="style2">TextMessage</span> for SMS messages </p>
      <p class="style4"> <span class="style2">MultipartMessage</span> for MMS messages </p>
      <p class="style5"> <span class="style2">PhoneCallLog</span> for phone history</p></td>
  </tr>
  <tr>
    <td valign="top">file explorer </td>
    <td valign="top"><span class="style2">String</span> for URI of the file</td>
  </tr>
  <tr>
    <td valign="top">BlackBerry Maps</td>
    <td valign="top" class="style2">MapView</td>
  </tr>
  <tr>
    <td valign="top">memos</td>
    <td valign="top" class="style2">BlackBerryMemo</td>
  </tr>
  <tr>
    <td valign="top">tasks</td>
    <td valign="top" class="style2">BlackBerryToDo</td>
  </tr>
  <tr>
    <td valign="top">media</td>
    <td valign="top">null</td>
  </tr>
  <tr>
    <td valign="top">phone</td>
    <td valign="top"><p class="style4"><span class="style2">PhoneCallLog</span> for phone history</p>
    <p class="style4"><span class="style2">String</span> for number selected or dialed</p>
    <p class="style5"><span class="style2">BlackBerryContact</span> for contact selected while dialing</p></td>
  </tr>
  <tr>
    <td valign="top">messages search </td>
    <td valign="top">null</td>
  </tr>
</table>

<p><a class="explink" onClick="switchMenu('AI_5', this);">Click for code sample: Create and register a menu item by using the ApplicationMenuItemRepository</a></p>
<div id="AI_5", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>// Create menu item
int placement = 0x350100;
ApplicationMenuItem ami = new ApplicationMenuItem(placement) 
{
    public Object run(Object context) 
    {
        // do something 
        return null; 
    }
 
    public String toString() 
    {
        return "My menu item";
    }
};

// Register menu item
ApplicationMenuItemRepository amir = 
    ApplicationMenuItemRepository.getInstance();

amir.addMenuItem(ApplicationMenuItemRepository.MENUITEM_SYSTEM, ami, 
    ad_menuhandler); // ad_menuhandler is an ApplicationDescriptor
</pre></td>
  </tr>
</table>
</div>

<h3>Matching string patterns in active fields  <a name="Pattern_matching" id="Pattern_matching"></a> <a href="#TOP" class="backtotop">[Back to top]</a></h3>
<p>Packages: <span class="style2"><a href="net/rim/device/api/ui/component/package-summary.html">net.rim.device.api.ui.component</a>, <a href="net/rim/blackberry/api/stringpattern/package-summary.html">net.rim.blackberry.api.stringpattern</a>, <a href="net/rim/blackberry/api/menuitem/package-summary.html">net.rim.blackberry.api.menuitem</a></span></p>
<p>The applications on a BlackBerry device that use the <span class="style2"><a href="net/rim/device/api/ui/component/ActiveAutoTextEditField.html">ActiveAutoTextEditField</a></span> or the <span class="style2"><a href="net/rim/device/api/ui/component/ActiveRichTextField.html">ActiveRichTextField</a></span> field (for example, the calendar application and the messages application) can recognize string patterns and provide specific items for those string patterns in the menu on the BlackBerry device. For example, if a message contains a phone number, the number is highlighted. If the BlackBerry device user selects the number and presses the Menu key, the special menu item <strong>Call</strong> <em>number</em> displays. </p>
<p>You can define your own string patterns and associate the patterns with custom menu items. The custom menu items display when a user selects a matching string in an <span class="style2">ActiveAutoTextEditField</span> or <span class="style2">ActiveRichTextField</span> field and opens the menu. The custom menu items can perform any action, such as starting your application. </p>
<p>You can use the <a href="net/rim/blackberry/api/stringpattern/PatternRepository.html" class="style2">PatternRepository</a> class to register a Perl-style regular expression or a specific string with the pattern repository on the BlackBerry device. You can use the <a href="net/rim/blackberry/api/menuitem/ApplicationMenuItem.html" class="style2">ApplicationMenuItem</a> class to define a menu item that is associated with the string pattern.</p>
<p><a class="explink" onClick="switchMenu('AI_6', this);">Click for code sample: Register a string pattern and a menu item </a></p>
<div id="AI_6", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>String pattern = “[Bb]lack[Bb]erry [Ss]martphone";

int patternType = PatternRepository.PATTERN_TYPE_REGULAR_EXPRESSION;
PatternRepository.addPattern(ad_menuhandler, pattern, patternType, 
    new ApplicationMenuItem[] { ami });
</pre></td>
  </tr>
</table>
</div>
<p>To see a sample application that demonstrates how to use  <span class="style2">PatternRepository</span> and active text fields, see the ActiveTextFieldsDemo sample application that is provided with the BlackBerry Java SDK.</p>
<h3>Registering content handlers that invoke your application <a name="AI_CHAPI2" id="AI_CHAPI2"></a></h3>
<p>Package: <span class="style2"><a href="javax/microedition/content/package-summary.html">javax.microedition.content</a></span></p>
<p>You can register the content handlers that invoke your application by using the <a href="javax/microedition/content/Registry.html">Registry</a> class, which is provided in the Content Handler API. </p>
<p>When you register a content handler, you can provide an array to specify the actions that invoke the handler. Note the following information:</p>
<ul>
  <li><span class="style2">ContentHandler.ACTION_OPEN</span> content handlers for the MIME-types that are not supported by the BlackBerry device are used in the BlackBerry Browser, file explorer, and in the Open Attachment menu item in the messages application</li>
  <li><span class="style2">ContentHandler.ACTION_SEND</span> content handlers for the image or video MIME-types are used in the file explorer (including in the  media application) and in the Send As  menu in the camera application </li>
</ul>

<p><a class="explink" onClick="switchMenu('AI_19', this);">Click for code sample: 
Register a content handler </a></p>
<div id="AI_19", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>
private static void registerApp()
{
    try
    {
        // This application will be a handler for csv files 
        // and will be invoked with ACTION_OPEN
        String[] types = {"text/csv"};
        String[] suffixes = {".csv"};            
        String[] actions = {ContentHandler.ACTION_OPEN};   
 
        // Get access to the registry and register as a content handler
        // CLASSNAME is the fully qualified name of the application
         Registry registry = Registry.getRegistry(CLASSNAME);       
         registry.register(CLASSNAME,types,suffixes,actions,null,ID,null);
         
    }
    catch (ContentHandlerException che)
    {   
        errorDialog("Registry#register() threw " + che.toString());
    }
    catch (ClassNotFoundException cnfe)
    {        
        errorDialog("Registry#register() threw " + cnfe.toString());
    }
} </pre></td>
  </tr>
</table>
</div>



<p><a class="explink" onClick="switchMenu('AI_20', this);">Click for code sample: Invoke the content handler </a></p>
<div id="AI_20", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>private static final String URL = "file:///SDCard/rim.csv";    
 
private void doInvoke()
{
    try
    { 
        // Create the Invocation with the hard-coded URL
        Invocation invoc = new Invocation(URL);
        invoc.setResponseRequired(false);  // We don't require a response
        
        // We want to invoke a handler that has registered with ACTION_OPEN
        invoc.setAction(ContentHandler.ACTION_OPEN); 
        
        // Get access to the Registry and pass it the Invocation
        // CLASSNAME is the fully qualified name of the application
        Registry registry = Registry.getRegistry(CLASSNAME); 
        registry.invoke(invoc); 
    } 
    catch (IOException ioe)
    { 
        errorDialog("Registry#invoke() threw " + ioe.toString());
    }
}</pre></td>
  </tr>
</table>
</div>



<p>For more information, see <a href="#AI_CHAPI">Using the Content Handler API</a>.</p>
<h2>Embedding content in BlackBerry Device Software applications <a name="EmbedSelf"></a> <a href="#TOP" class="backtotop">[back to top]</a></h2>
<p>You can embed content in BlackBerry Device Software applications in many ways, including the following:
<ul>
  <li><a href="#AI_MessagesApp">Adding application messages to the messages application</a></li>
  <li><a href="#AI_ContactLinking">Linking contacts in your application with contacts in the contacts application </a> </li>
  <li><a href="#AI_PhoneScreens">Adding content to phone screens</a></li>
  <li><a href="#AI_Options">Adding options for your application</a></li>
  <li><a href="#AI_Notifications">Registering your application as a notification source</a></li>
</ul>
<h3>Adding application messages to the messages application <a name="AI_MessagesApp" id="AI_MessagesApp"></a></h3>
<p>Package: <span class="style2"><a href="net/rim/blackberry/api/messagelist/package-summary.html">net.rim.blackberry.api.messagelist</a></span></p>
<p>You can use the <span class="style2">messagelist</span> package to create application messages.  An <a href="net/rim/blackberry/api/messagelist/ApplicationMessage.html">ApplicationMessage</a> is a custom message that displays in the messages application and invokes your application when the user opens it or chooses a menu item that you provide for the message. An application message is <em>not </em>an email message.
<p>Application messages can be stored in folders. You can define indicators for your application messages that display on the Home screen.
<p><a class="explink" onClick="switchMenu('AI_7', this);">Click for code sample: Register an application message folder </a></p>
<div id="AI_7", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>ApplicationMessageFolderRegistry amfr = 
    ApplicationMessageFolderRegistry.getInstance();
ApplicationMessageFolder folder = 
    amfr.registerFolder(folderId, "My Folder", collection, true);
ApplicationIcon icon = 
    new ApplicationIcon(EncodedImage.getEncodedImageResource("img/message_icon.jpg"), true);
int status = ApplicationMessage.Status.INCOMING | ApplicationMessage.Status.UNOPENED;

amfr.registerMessageIcon(0, status, icon);
folder.setSearchProperties(new ApplicationMessageSearchProperties(true));
folder.addListener(
    myApplicationMessageFolderListener,
    ApplicationMessageFolderListener.MESSAGE_DELETED | 
        ApplicationMessageFolderListener.MESSAGE_MARKED_OPENED | 
        ApplicationMessageFolderListener.MESSAGE_MARKED_UNOPENED, 
    ad_menuhandler);
amfr.registerMessageMenuItems(0, status, 
    new ApplicationMenuItem[] {createAMI("MSG INTEGRATION", 0)}, ad_menuhandler);
amfr.setBulkMarkOperationsSupport(0, status, true, false);
</pre></td>
</tr>
</table>
</div>

<p><a class="explink" onClick="switchMenu('AI_8', this);">Click for code sample: Register an indicator and add an application message </a></p>
<div id="AI_8", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>// Register icon for indicator
ApplicationIndicatorRegistry air = ApplicationIndicatorRegistry.getInstance();
air.register(icon, false, false);
 
// Add a message
// MyApplicationMessage implements ApplicationMessage
ApplicationMessage myMessage = new MyApplicationMessage(); 
collection.addMessage(myMessage);
folder.fireElementAdded(myMessage);
 
// Update indicator
ApplicationIndicator ai = air.getApplicationIndicator();
int size = collection.size();
ai.setValue(size);
ai.setVisible(size > 0);
</pre></td>
</tr>
</table>
</div>

<p>To see a sample application that demonstrates how to use the Message List API, see the MessageListDemo sample application that is provided with the BlackBerry Java SDK.
<h3>Linking contacts in your application with contacts in the contacts application <a name="AI_ContactLinking" id="AI_ContactLinking"></a></h3>
<p>Package: <span class="style2"><a href="net/rim/blackberry/api/pdap/contactlinking/package-summary.html">net.rim.blackberry.api.pdap.contactlinking</a></span></p>
<p>You can use the <a href="net/rim/blackberry/api/pdap/contactlinking/LinkedContactUtilities.html">LinkedContactUtilities</a> class to link a contact in your application with a contact in the contacts application on the BlackBerry device. You can  use the <a href="net/rim/blackberry/api/pdap/contactlinking/AddressBookFieldFactory.html">AddressBookFieldFactory</a> interface to add a custom field that displays in the contacts application when a BlackBerry device user selects a contact that is linked with a contact in your application. You can also create menu items that display in the contacts application when a user views a contact that is linked with one of your contacts.
<p><a class="explink" onClick="switchMenu('AI_9', this);">Click for code sample: Link a contact </a></p>
<div id="AI_9", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>String contactID = contact.getString(Contact.UID,0); //contact is a BlackBerryContact
LinkedContactUtilities.linkContact(contact, 
    new DefaultLinkableContact(contactID, APPLICATION_ID));

LinkedContactUtilities.registerMenuItems(new ApplicationMenuItem[] {ami}, 
    APPLICATION_ID, LinkedContactConstants.COMPOSE_SN_MENU_GROUP, ad_menuhandler);

AddressBookFieldFactory factory = new AddressBookFieldFactory() 
{
    public Field createAddressBookField(String contactID) {
        return new MyDisplayField(contactID);
    }
};
LinkedContactUtilities.registerAddressBookFieldFactory(factory, APPLICATION_ID);
</pre></td>
</tr>
</table>
</div>

<p>To see a sample application that demonstrates how to link contacts, see the 
ContactLinkingDemo sample application that is provided with the BlackBerry Java SDK.
<h3>Adding content to phone screens <a name="AI_PhoneScreens" id="AI_PhoneScreens"></a></h3>
<p>Package: <span class="style2"><a href="net/rim/blackberry/api/phone/phonegui/package-summary.html">net.rim.blackberry.api.phone.phonegui</a></span></p>
<p>You can use the <a href="net/rim/blackberry/api/phone/phonegui/PhoneScreen.html">PhoneScreen</a> class with the <a href="net/rim/blackberry/api/phone/PhoneListener.html">PhoneListener</a> interface to display information in the phone application for incoming, outgoing, or active calls. </p>
<p><a class="explink" onClick="switchMenu('AI_10', this);">Click for code sample: Add an image to the Incoming Call screen </a></p>
<div id="AI_10", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>if (PhoneScreen.isSupported()) 
{
    Phone.addPhoneListener(
        new AbstractPhoneListener() 
        {
            public void callIncoming(int callId) 
            {
                PhoneScreen ps = new PhoneScreen(callId, 
                    Application.getApplication());
                ps.add(new BitmapField(Bitmap.getBitmapResource(&quot;img/my.jpg&quot;)));
                ps.sendDataToScreen(); 
            }
        });
}</pre></td>
</tr>
</table>
</div>

<p>To see a sample application that demonstrates how to use <span class="style2">PhoneScreen</span>, see the PhoneScreenDemo sample application that is provided with the BlackBerry Java SDK.</p>
<h3>Adding options for your application <a name="AI_Options" id="AI_Options"></a></h3>
<p>Package: <span class="style2"><a href="net/rim/blackberry/api/options/package-summary.html">net.rim.blackberry.api.options</a></span></p>
<p>You can use the <span class="style2"><a href="net/rim/blackberry/api/options/OptionsProvider.html">OptionsProvider</a></span> interface to add options for your application to the options application on the BlackBerry device.</p>
<p><a class="explink" onClick="switchMenu('AI_11', this);">Click for code sample: Add application options </a></p>
<div id="AI_11", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>OptionsManager.registerOptionsProvider(new OptionsProvider()
{
    public void populateMainScreen(MainScreen mainScreen) 
    {
        // Add one or more fields to display options
    }
    
    public String getTitle() 
    {
        return &quot;Options Demo&quot;; 
    }

    public void save() 
    {
        // Save changes
    }
});
</pre></td>
</tr>
</table>
</div>
<p>To see a sample application that demonstrates how to use <span class="style2">OptionsProvider</span>, see the OptionsProviderDemo sample application that is provided with the BlackBerry Java SDK.
<h3>Registering your application as a notification source <a name="AI_Notifications" id="AI_Notifications"></a></h3>
<p>Package: <span class="style2"><a href="net/rim/device/api/notification/package-summary.html">net.rim.device.api.notification</a></span></p>
<p>You can use the Notification API to register your application as an event notification source and to trigger notifications. Custom notification sources appear in the sounds application, under Other in Set Ring Tones/Alerts. Custom notifications respect the settings that the user selects in the sounds application. </p>
<p><a class="explink" onClick="switchMenu('AI_12', this);">Click for code sample: Register a notification source and trigger notification </a></p>
<div id="AI_12", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>// Register notification source
NotificationsManager.registerSource( sourceID, “Notifications Demo”, 
    NotificationsConstants.IMPORTANT );

// Trigger notification
NotificationsManager.triggerImmediateEvent(sourceID, ...);
</pre></td>
</tr>
</table>
</div>
<p>To see a sample application that demonstrates how to use the Notification API, see the NotificationsDemo sample application that is provided with the BlackBerry Java SDK.
<h2>Embedding BlackBerry Device Software UI components in your application <a name="EmbedOther"></a> <a href="#TOP" class="backtotop">[back to top]</a></h2>
<p>You can include in your applications many of the specialized UI components that the BlackBerry Device Software applications use. Below are some examples.
For more information about using these and other UI components, see the <em>BlackBerry Java Application UI and Navigation Development Guide</em>.
<ul>
  <li><a href="#AutoComplete">Autocomplete text field </a></li>
  <li><a href="#LocationPicker">Location picker </a> </li>
  <li><a href="#FilePicker">File picker </a></li>
  <li><a href="#Mapfield">Map field </a></li>
  <li><a href="#Browserfield">Browser field </a></li>
  <li><a href="#Mediafields">Media fields</a> </li>
</ul>

<h3>Autocomplete text field  <a name="AutoComplete"></a></h3>
<p>Package: <a href="net/rim/device/api/ui/component/package-summary.html">net.rim.device.api.ui.component</a> 
<p>The <a href="net/rim/device/api/ui/component/AutoCompleteField.html">AutoCompleteField</a> class compares the text that a user types in the field against the items in a data source, and displays the matches in a drop-down list below the field.  
<p><a class="explink" onClick="switchMenu('AI_13', this);">Click for code sample: Use an AutoCompleteField </a></p>
<div id="AI_13", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>BasicFilteredList bfl = new BasicFilteredList(); 
bfl.addDataSource(0, 
                  BasicFilteredList.DATA_SOURCE_CONTACTS,
                  BasicFilteredList.DATA_FIELD_CONTACTS_NAME_FULL | 
                      BasicFilteredList.DATA_FIELD_CONTACTS_COMPANY,
                  BasicFilteredList.DATA_FIELD_CONTACTS_NAME_FULL |
                      BasicFilteredList.DATA_FIELD_CONTACTS_COMPANY | 
                      BasicFilteredList.DATA_FIELD_CONTACTS_EMAIL,
                  -1,
                  -1, 
                  null, 
                  BasicFilteredList.COMPARISON_IGNORE_CASE);
 
AutoCompleteField autoCompleteFieldContacts = new AutoCompleteField( bfl, 
    AutoCompleteField.LIST_DROPDOWN | AutoCompleteField.LIST_EXPAND_ON_CLICK);
</pre></td>
</tr>
</table>
</div>

<p> To see a sample application that demonstrates how to use an autocomplete text field, see  the AutoCompleteFieldDemo sample application that is provided with the BlackBerry Java SDK.
<h3>Location picker   <a name="LocationPicker"></a></h3>
<p>Package: <a href="net/rim/device/api/lbs/picker/package-summary.html">net.rim.device.api.lbs.picker</a> 
<p>The <a href="net/rim/device/api/lbs/picker/LocationPicker.html">LocationPicker</a> class enables users to select a location by using sources such as contacts, GPS coordinates, recent locations, and application suggestions. 
<p><a class="explink" onClick="switchMenu('AI_14', this);">Click for code sample: Use a LocationPicker </a></p>
<div id="AI_14", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>LocationPicker.Picker[] locationPickersArray = new LocationPicker.Picker[] 
{
    EnterLocationPicker.getInstance(false),
    SuggestedLocationPicker.getInstance("App specific...", landmarks ),            
    RecentLocationPicker.getInstance(),
    GPSLocationPicker.getInstance(),
    MapsLocationPicker.getInstance(),
    ContactsLocationPicker.getInstance(false)
};            
LocationPicker locationPicker = LocationPicker.getInstance(locationPickersArray);
locationPicker.setListener(this); 
locationPicker.show();
</pre></td>
</tr>
</table>
</div>

<p> To see a sample application that demonstrates how to use a location picker, see  the LocationPickerDemo sample application that is provided with the BlackBerry Java SDK.
<h3>File picker   <a name="FilePicker"></a></h3>
<p>Package: <a href="net/rim/device/api/ui/picker/package-summary.html">net.rim.device.api.ui.picker</a> 
<p>The <a href="net/rim/device/api/ui/picker/FilePicker.html">FilePicker</a> class enables users to select  a file by navigating to a folder.  
<p><a class="explink" onClick="switchMenu('AI_15', this);">Click for code sample: Use a FilePicker </a></p>
<div id="AI_15", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>// Get the FilePicker instance
FilePicker filePicker = FilePicker.getInstance();
           
// Set the file picker to only display mp3 files
filePicker.setFilter(".mp3");

// Obtain the default system music directory 
String path = System.getProperty(
                    "fileconn.dir.memorycard.music");
                
// Set the directory to open the file picker in 
filePicker.setPath(path);  

filePicker.setListener(this);
filePicker.show();
</pre></td>
</tr>
</table>
</div>

<p> To see a sample application that demonstrates how to use a file picker, see  the FilePickerDemo sample application that is provided with the BlackBerry Java SDK.
<h3>Map field   <a name="Mapfield"></a></h3>
<p>Package: <a href="net/rim/device/api/lbs/package-summary.html">net.rim.device.api.lbs</a> 
<p>You can use the <a href="net/rim/device/api/lbs/MapField.html">MapField</a> class to embed a  map in your application.  
<p><a class="explink" onClick="switchMenu('AI_16', this);">Click for code sample: Use a MapField </a></p>
<div id="AI_16", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>MapField mapField = new MapField();
mapField.moveTo(initialLocation);
mapField.setZoom(initialZoom);
screen.add(mapField);</pre></td>
</tr>
</table>
</div>

<p> To see a sample application that demonstrates how to embed a map, see  the EmbeddedMapDemo sample application that is provided with the BlackBerry Java SDK.
<h3>Browser field   <a name="Browserfield"></a></h3>
<p>Package: <a href="net/rim/device/api/browser/field2/package-summary.html">net.rim.device.api.browser.field2</a> 
<p>You can use the <a href="net/rim/device/api/browser/field2/BrowserField.html">BrowserField</a> class to embed web content in your application. <span class="style2">BrowserField</span> provides methods to register listeners; request, execute, scale, display, debug, and navigate content; retrieve content information; and handle errors.
<p><a class="explink" onClick="switchMenu('AI_17', this);">Click for code sample: Use a BrowserField </a></p>
<div id="AI_17", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>// Create new instance of BrowserField
BrowserField browserField = new BrowserField();
 
// Add the browser field to a ui manager or screen
screen.add( browserField );
 
// Request the content to display

browserField.requestContent("http://www.blackberry.com");
</pre></td>
</tr>
</table>
</div>

<h3>Media fields <a name="Mediafields"></a></h3>
<p>Package: <a href="javax/microedition/media/package-summary.html">javax.microedition.media</a>, <a href="javax/microedition/media/control/package-summary.html">javax.microedition.media.control</a>
<p><a href="net/rim/device/api/browser/field2/package-summary.html"></a>You can embed media players and media recorders in your application by using the Mobile Media API (JSR 135). 
<p><a class="explink" onClick="switchMenu('AI_18', this);">Click for code sample: Display a video control  </a></p>
<div id="AI_18", class="codesample">
<table cellspacing="0" class="codesample" width="75%">
  <tr>
    <td><pre>Player player = Manager.createPlayer("capture://video");
player.realize();
videoControl = (VideoControl) player.getControl("VideoControl");
videoField = (Field) videoControl.initDisplayMode(VideoControl.USE_GUI_PRIMITIVE, 
    "net.rim.device.api.ui.Field");
videoControl.setDisplayFullScreen(true);
videoControl.setVisible(true);
player.start();</pre></td>
</tr>
</table>
</div>
<h2>Accessing data on a BlackBerry device <a name="PIM_listeners"></a> <a href="#TOP" class="backtotop">[back to top]</a></h2>
<p>You can access PIM data on a BlackBerry device in your application. For more information, see the <a href="PIM-summary.html">PIM</a> overview.
<HR>
<div id="legalnotice">
<table cellspacing="0" cellpading="0" width="100%" style="border:none;">
<tr>
<td style="border:none;">
<font size=-1>
<P>Copyright 1999-2011 Research In Motion Limited. 295 Phillip Street, Waterloo, Ontario, Canada, N2L 3W8. All Rights Reserved.<br>
Java is a trademark of Oracle America, Inc. in the US and other countries.</p>
</font>
</td>
<td style="text-align:right; border:none;">
<font size=-1><br>
<a href="http://www.blackberry.com/legal" target="_blank">Legal</a>
</font>
</td>
</tr>
</table>
 </div>
</BODY>
</HTML>
