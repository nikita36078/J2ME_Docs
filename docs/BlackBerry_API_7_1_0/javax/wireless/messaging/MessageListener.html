<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_04) on Thu Nov 24 17:26:39 EST 2011 -->
<TITLE>
MessageListener (BlackBerry JDE 7.1.0 API Reference)
</TITLE>

<META NAME="keywords" CONTENT="javax.wireless.messaging.MessageListener interface">
<META NAME="keywords" CONTENT="notifyIncomingMessage()">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="MessageListener (BlackBerry JDE 7.1.0 API Reference)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<SCRIPT SRC="../../../script.js" TYPE="text/javascript"></SCRIPT>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../javax/wireless/messaging/MessageConnection.html" title="interface in javax.wireless.messaging"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../javax/wireless/messaging/MessagePart.html" title="class in javax.wireless.messaging"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?javax/wireless/messaging/MessageListener.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MessageListener.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<FORM action="https://www.blackberry.com/DocsFeedback/" method="GET" target="_new">
<INPUT type="hidden" name="title" value="API Reference">
<INPUT type="hidden" name="source" value="External">
<INPUT type="hidden" name="version" value="7.1.0">
<INPUT type="hidden" name="classname" value="javax.wireless.messaging.MessageListener">
<INPUT type="submit" value="Submit Feedback" /></FORM>

<BR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
javax.wireless.messaging</FONT>
<BR>
Interface MessageListener</H2>
<DL>
<DT><B>All Known Subinterfaces:</B> <DD><A HREF="../../../net/rim/blackberry/api/sms/OutboundMessageListener.html" title="interface in net.rim.blackberry.api.sms">OutboundMessageListener</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>MessageListener</B></DL>
</PRE>

<P>
The <code>MessageListener</code> interface provides a mechanism for the application to be
 notified of incoming messages.
 <p>
 When an incoming message arrives, the {link <A HREF="../../../javax/wireless/messaging/MessageListener.html#notifyIncomingMessage(javax.wireless.messaging.MessageConnection)"><CODE>MessageListener.notifyIncomingMessage(MessageConnection)</CODE></A>
 method is called. The application MUST retrieve the message using the
 <A HREF="../../../javax/wireless/messaging/MessageConnection.html#receive()"><CODE>MessageConnection.receive()</CODE></A> method of the <code>MessageConnection</code>.
 <code>MessageListener</code> should not call <code>receive()</code> directly. Instead, it can
 start a new thread which will receive the message or call another method of the application
 (which is outside of the listener) that will call <code>receive()</code>. For an example of how
 to use <code>MessageListener</code>, see "A Sample MessageListener Implementation" below.
 <p>
 The listener mechanism allows applications to receive incoming messages without needing to have a
 thread blocked in the <code>receive()</code> method call.
 <p>
 If multiple messages arrive very closely together in time, the implementation has the option of
 calling this listener from multiple threads in parallel. Applications MUST be prepared to handle
 this and implement any necessary synchronization as part of the application code, while obeying
 the requirements set for the listener method.
 <p>
 This interface is defined in <a href="http://jcp.org/en/jsr/detail?id=205">JSR 205: Wireless
 Messaging API 2.0</a>, which extends and enhances <a
 href="http://www.jcp.org/en/jsr/detail?id=120">JSR 120: Wireless Messaging API</a>
 </p>
 <h2>A Sample MessageListener Implementation</h2>
 <p>
 The following sample code illustrates how lightweight and resource-friendly a
 <code>MessageListener</code> can be. In the sample, a separate thread is spawned to handle
 message reading. The MIDlet life cycle is respected by releasing connections and signaling
 threads to terminate when the MIDlet is paused or destroyed.
 </p>

<!--
Formatted using http://www.tohtml.com/java
Original source code is available in the WMA 2.0 specification on pages 24 and 25
-->
<pre style='color:#000000;background:#ffffff;'><span style='color:#3f7f59; '>// Sample message listener program.</span>
<span style='color:#7f0055; font-weight:bold; '>import</span><span style='color:#7f0055; '> java</span><span style='color:#7f0055; '>.</span><span style='color:#7f0055; '>io</span><span style='color:#7f0055; '>.</span><span style='color:#7f0055; '>IOException</span><span style='color:#7f0055; '>;</span>
<span style='color:#7f0055; font-weight:bold; '>import</span><span style='color:#7f0055; '> javax</span><span style='color:#7f0055; '>.</span><span style='color:#7f0055; '>microedition</span><span style='color:#7f0055; '>.</span><span style='color:#7f0055; '>midlet</span><span style='color:#7f0055; '>.</span><span style='color:#7f0055; font-weight:bold; '>*</span><span style='color:#7f0055; '>;</span>
<span style='color:#7f0055; font-weight:bold; '>import</span><span style='color:#7f0055; '> javax</span><span style='color:#7f0055; '>.</span><span style='color:#7f0055; '>microedition</span><span style='color:#7f0055; '>.</span><span style='color:#7f0055; '>io</span><span style='color:#7f0055; '>.</span><span style='color:#7f0055; font-weight:bold; '>*</span><span style='color:#7f0055; '>;</span>
<span style='color:#7f0055; font-weight:bold; '>import</span><span style='color:#7f0055; '> javax</span><span style='color:#7f0055; '>.</span><span style='color:#7f0055; '>wireless</span><span style='color:#7f0055; '>.</span><span style='color:#7f0055; '>messaging</span><span style='color:#7f0055; '>.</span><span style='color:#7f0055; font-weight:bold; '>*</span><span style='color:#7f0055; '>;</span>

<span style='color:#7f0055; font-weight:bold; '>public</span> <span style='color:#7f0055; font-weight:bold; '>class</span> Example <span style='color:#7f0055; font-weight:bold; '>extends</span> MIDlet <span style='color:#7f0055; font-weight:bold; '>implements</span> MessageListener {
    MessageConnection messconn;
    <span style='color:#7f0055; font-weight:bold; '>boolean</span> done;
    <span style='color:#7f0055; font-weight:bold; '>Reader</span> reader;

    <span style='color:#3f7f59; '>// Initial tests setup and execution.</span>
    <span style='color:#7f0055; font-weight:bold; '>public</span> <span style='color:#7f0055; font-weight:bold; '>void</span> startApp() {
        <span style='color:#7f0055; font-weight:bold; '>try</span> {
            <span style='color:#3f7f59; '>// Start a message-reading thread.</span>
            done = <span style='color:#7f0055; font-weight:bold; '>false</span>;
            reader = <span style='color:#7f0055; font-weight:bold; '>new</span> <span style='color:#7f0055; font-weight:bold; '>Reader</span>();
            <span style='color:#7f0055; font-weight:bold; '>new</span> <span style='color:#7f0055; font-weight:bold; '>Thread</span>(reader).start();
            <span style='color:#3f7f59; '>// Get our receiving port connection.</span>
            messconn = (MessageConnection) Connector.open(<span style='color:#2a00ff; '>"sms://:6222"</span>);
            <span style='color:#3f7f59; '>// Register a listener for inbound messages.</span>
            messconn.setMessageListener(<span style='color:#7f0055; font-weight:bold; '>this</span>);
        } <span style='color:#7f0055; font-weight:bold; '>catch</span> (<span style='color:#7f0055; font-weight:bold; '>IOException</span> e) {
            <span style='color:#3f7f59; '>// Handle startup errors</span>
        }
    }

    <span style='color:#3f7f59; '>// Asynchronous callback for inbound message.</span>
    <span style='color:#7f0055; font-weight:bold; '>public</span> <span style='color:#7f0055; font-weight:bold; '>void</span> notifyIncomingMessage(MessageConnection conn) {
        <span style='color:#7f0055; font-weight:bold; '>if</span> (conn == messconn) {
            reader.handleMessage();
        }
    }

    <span style='color:#3f7f59; '>// Required MIDlet method - release the connection and signal the reader thread to terminate.</span>
    <span style='color:#7f0055; font-weight:bold; '>public</span> <span style='color:#7f0055; font-weight:bold; '>void</span> pauseApp() {
        done = <span style='color:#7f0055; font-weight:bold; '>true</span>;
        <span style='color:#7f0055; font-weight:bold; '>try</span> {
            messconn.close();
        } <span style='color:#7f0055; font-weight:bold; '>catch</span> (<span style='color:#7f0055; font-weight:bold; '>IOException</span> e) {
            <span style='color:#3f7f59; '>// Handle errors</span>
        }
    }

    <span style='color:#3f7f59; '>// Required MIDlet method - shutdown.</span>
    <span style='color:#3f7f59; '>// @param unconditional forced shutdown flag</span>
    <span style='color:#7f0055; font-weight:bold; '>public</span> <span style='color:#7f0055; font-weight:bold; '>void</span> destroyApp(<span style='color:#7f0055; font-weight:bold; '>boolean</span> unconditional) {
        done = <span style='color:#7f0055; font-weight:bold; '>true</span>;
        <span style='color:#7f0055; font-weight:bold; '>try</span> {
            messconn.setMessageListener(<span style='color:#7f0055; font-weight:bold; '>null</span>);
            messconn.close();
        } <span style='color:#7f0055; font-weight:bold; '>catch</span> (<span style='color:#7f0055; font-weight:bold; '>IOException</span> e) {
            <span style='color:#3f7f59; '>// Handle shutdown errors.</span>
        }
    }

    <span style='color:#3f7f59; '>// Isolate blocking I/O on a separate thread, so callback can return immediately.</span>
    <span style='color:#7f0055; font-weight:bold; '>private</span> <span style='color:#7f0055; font-weight:bold; '>class</span> Reader <span style='color:#7f0055; font-weight:bold; '>implements</span> <span style='color:#7f0055; font-weight:bold; '>Runnable</span> {
        <span style='color:#7f0055; font-weight:bold; '>private</span> <span style='color:#7f0055; font-weight:bold; '>int</span> pendingMessages = 0;

        <span style='color:#3f7f59; '>// The run method performs the actual message reading.</span>
        <span style='color:#7f0055; font-weight:bold; '>public</span> <span style='color:#7f0055; font-weight:bold; '>void</span> run() {
            <span style='color:#7f0055; font-weight:bold; '>while</span> (!done) {
                <span style='color:#7f0055; font-weight:bold; '>synchronized</span> (<span style='color:#7f0055; font-weight:bold; '>this</span>) {
                    <span style='color:#7f0055; font-weight:bold; '>if</span> (pendingMessages == 0) {
                        <span style='color:#7f0055; font-weight:bold; '>try</span> {
                            wait();
                        } <span style='color:#7f0055; font-weight:bold; '>catch</span> (<span style='color:#7f0055; font-weight:bold; '>Exception</span> e) {
                            <span style='color:#3f7f59; '>// Handle interruption</span>
                        }
                    }
                    pendingMessages--;
                }
                <span style='color:#3f7f59; '>// The benefit of the MessageListener is here. This thread could via similar</span>
                <span style='color:#3f7f59; '>// triggers be handling other kind of events as well in addition to just receiving</span>
                <span style='color:#3f7f59; '>// the messages.</span>
                <span style='color:#7f0055; font-weight:bold; '>try</span> {
                    Message mess = messconn.receive();
                } <span style='color:#7f0055; font-weight:bold; '>catch</span> (<span style='color:#7f0055; font-weight:bold; '>IOException</span> ioe) {
                    <span style='color:#3f7f59; '>// Handle reading errors</span>
                }
            }
        }

        <span style='color:#3f7f59; '>// Invoked from notifyIncomingMessage() to handle the incoming message.</span>
        <span style='color:#7f0055; font-weight:bold; '>public</span> <span style='color:#7f0055; font-weight:bold; '>synchronized</span> <span style='color:#7f0055; font-weight:bold; '>void</span> handleMessage() {
            pendingMessages++;
            notify();
        }
    }

}
</pre>
<P>

<P>
<DL>
<DT><B>Since:</B></DT><DD>BlackBerry API 4.0.0</DD>
</DL>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="" CLASS="SummaryTable">
<TR BGCOLOR="#CCCCFF">
<TH ALIGN="left" COLSPAN="3"><FONT SIZE="+0">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/wireless/messaging/MessageListener.html#notifyIncomingMessage(javax.wireless.messaging.MessageConnection)">notifyIncomingMessage</A></B>(<A HREF="../../../javax/wireless/messaging/MessageConnection.html" title="interface in javax.wireless.messaging">MessageConnection</A>&nbsp;conn)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called by the platform when an incoming message arrives to a <code>MessageConnection</code>
 where the application has registered this listener object.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<BR>

<BR>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF">
<TH ALIGN="left" COLSPAN="1" CLASS="TableHeadingColor"><FONT SIZE="+0">
Method Detail</FONT></TH>
</TR>
</TABLE>

<A NAME="notifyIncomingMessage(javax.wireless.messaging.MessageConnection)"><!-- --></A><H3>
notifyIncomingMessage</H3>
<PRE>
void <B>notifyIncomingMessage</B>(<A HREF="../../../javax/wireless/messaging/MessageConnection.html" title="interface in javax.wireless.messaging">MessageConnection</A>&nbsp;conn)</PRE>
<DL>
<DD>Called by the platform when an incoming message arrives to a <code>MessageConnection</code>
 where the application has registered this listener object.
 <p>
 This method is called once for each incoming message to the <code>MessageConnection</code>.
 <p>
 <b>NOTE:</b> The implementation of this method MUST return quickly and MUST NOT perform any
 extensive operations. The application SHOULD NOT receive and handle the message during this
 method call. Instead, it should act only as a trigger to start the activity in the
 application’s own thread.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>conn</CODE> - the <code>MessageConnection</code> where the incoming message has arrived.<DT><B>Since:</B></DT><DD>BlackBerry API 4.0.0</DD>
</DL>
</DD>
</DL>

<BR>

<BR>
<FORM action="https://www.blackberry.com/DocsFeedback/" method="GET" target="_new">
<INPUT type="hidden" name="title" value="API Reference">
<INPUT type="hidden" name="source" value="External">
<INPUT type="hidden" name="version" value="7.1.0">
<INPUT type="hidden" name="classname" value="javax.wireless.messaging.MessageListener">
<INPUT type="submit" value="Submit Feedback" /></FORM>

<BR>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../javax/wireless/messaging/MessageConnection.html" title="interface in javax.wireless.messaging"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../javax/wireless/messaging/MessagePart.html" title="class in javax.wireless.messaging"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?javax/wireless/messaging/MessageListener.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="MessageListener.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<font size=-1><p>Copyright 1999-2011 Research In Motion Limited.  295 Phillip Street, Waterloo, Ontario, Canada, N2L 3W8.  All Rights Reserved.<br>Java is a trademark of Oracle America Inc. in the US and other countries.<br><a target='_blank' href='http://www.blackberry.com/legal'>Legal</a></p></font>
</BODY>
</HTML>
