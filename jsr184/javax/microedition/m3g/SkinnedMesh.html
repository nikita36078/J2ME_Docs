<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_08) on Thu Jun 30 13:21:21 EEST 2005 -->
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<TITLE>
SkinnedMesh (Mobile 3D Graphics API (M3G))
</TITLE>

<META NAME="keywords" CONTENT="javax.microedition.m3g.SkinnedMesh class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="SkinnedMesh (Mobile 3D Graphics API (M3G))";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/SkinnedMesh.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<EM><B>M3G 1.1 -- Jun 22, 2005</B></EM></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../javax/microedition/m3g/RayIntersection.html" title="class in javax.microedition.m3g"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../javax/microedition/m3g/Sprite3D.html" title="class in javax.microedition.m3g"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SkinnedMesh.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_javax.microedition.m3g.Node">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
javax.microedition.m3g</FONT>
<BR>
Class SkinnedMesh</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><A HREF="../../../javax/microedition/m3g/Object3D.html" title="class in javax.microedition.m3g">javax.microedition.m3g.Object3D</A>
      <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><A HREF="../../../javax/microedition/m3g/Transformable.html" title="class in javax.microedition.m3g">javax.microedition.m3g.Transformable</A>
          <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><A HREF="../../../javax/microedition/m3g/Node.html" title="class in javax.microedition.m3g">javax.microedition.m3g.Node</A>
              <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><A HREF="../../../javax/microedition/m3g/Mesh.html" title="class in javax.microedition.m3g">javax.microedition.m3g.Mesh</A>
                  <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><B>javax.microedition.m3g.SkinnedMesh</B>
</PRE>
<HR>
<DL>
<DT>public class <B>SkinnedMesh</B><DT>extends <A HREF="../../../javax/microedition/m3g/Mesh.html" title="class in javax.microedition.m3g">Mesh</A></DL>

<P>
<p>A scene graph node that represents a skeletally animated polygon mesh.</p>

<p>Vertex positions in a SkinnedMesh can be associated with multiple
separately transforming Nodes, with a weight factor specified for
each. This enables groups of vertices to transform independently of
each other while smoothly deforming the polygon mesh "skin" with the
vertices. This style of animation is highly efficient for animated
characters.</p>

<p>The structure of a SkinnedMesh is shown in the figure below.</p>

<center><img src="./doc-files/SkinnedMesh-components.png"
width="421" height="357"/></center>

<p>A SkinnedMesh node is the parent of its skeleton group, and vice versa,
the skeleton is the only child of the SkinnedMesh. In other words,
<code>this.getSkeleton().getParent() == this</code>. The skeleton group and
its descendants constitute a branch in the scene graph, and that branch is
traversed just like any other branch during rendering and picking. Any sprites
and meshes, including skinned meshes, contained in the skeleton group are
therefore rendered as usual. This allows, for example, a game character to
have a weapon in its hand, such that the weapon is a separate node that can
be easily interchanged with another.</p>

<h3>Vertex transformation</h3>

<p>Each vertex is transformed once for each Node affecting it. The results
are then blended together according to the weight factors of each node. To
get an initial idea of how this works, see the figure below. A more formal
definition follows.</p>

<center><img src="./doc-files/SkinnedMesh-blending.png" pdf="wide"/></center>

<p>Let us denote the set of nodes (bones) associated with a vertex by
{ N<sub>1</sub>, N<sub>2</sub>, ..., N<sub>N</sub> }. Let us also denote
by <b>M</b><sub>i</sub> the transformation <i>from</i> the local coordinate
system of node N<sub>i</sub> <i>to</i> a <i>reference coordinate system</i>.
The choice of the reference coordinate system is not critical; depending on
the implementation, good choices may include the world coordinate system,
the coordinate system of the SkinnedMesh node, or the coordinate system of
the current camera. Finally, let us denote the weight associated with node
N<sub>i</sub> as W<sub>i</sub>. The blended position of a vertex in the
reference coordinate system is then:</p>

<ul>
  <b>v</b>' =
     sum [ w<sub>i</sub> <b>M</b><sub>i</sub> <b>B</b><sub>i</sub> <b>v</b> ]
</ul>

<p>where</p>

<ul>
<li>0 &lt;= i &lt; N, where N is the number of bones
    associated with <b>v</b>;</li>
<li><b>v</b> is the original vertex position in the source VertexBuffer;</li>
<li><b>B</b><sub>i</sub> is the "at rest" transformation from the SkinnedMesh
  node to bone N<sub>i</sub>;</li>
<li><b>M</b><sub>i</sub> is the transformation from bone N<sub>i</sub> to the
  chosen reference coordinate system (e.g. world coordinates);</li>
<li>w<sub>i</sub> is the normalized weight of bone N<sub>i</sub>, computed as
  w<sub>i</sub> = W<sub>i</sub> / (W<sub>1</sub> + ... + W<sub>N</sub>).</li>
</ul>

<p>Finally, the blended vertex position <b>v</b>' is transformed from
the chosen reference coordinate system to the camera space as usual.
Note that when computing the normalized weights w<sub>i</sub>, 0 / 0 = 0.</p>

<p>If a vertex <b>v</b> has no transformations associated with it, as
is the case for all vertices in a newly constructed SkinnedMesh, the
vertex lies implicitly in the coordinate system of the SkinnedMesh node
itself. That is, a SkinnedMesh in its initial state is equivalent to an
ordinary Mesh. When a vertex is explicitly associated with any bone in
the skeleton, the implicit association with the SkinnedMesh node is
removed.</p>

<p>The transformation of vertices is illustrated in the figure below.</p>

<center><img src="./doc-files/SkinnedMesh-transforms.png"
width="510" height="592"/></center>

<h3>Deferred exceptions</h3>

<p>Any special cases and exceptions that are defined for Mesh also
apply for SkinnedMesh. An extra exception case is introduced due to
the vertex indices set by <code>addTransform</code>. If any part of
the skinned mesh is needed for picking or rendering, then every bone
in that mesh must refer to a valid range of vertex indices, otherwise
an IllegalStateException will be thrown. The indices cannot be
validated until when they are actually needed, that is, when rendering
or picking.  This is because the application may change the length of
the associated VertexBuffer, and consequently make the indices invalid
or valid, at any time.</p>
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><a href="../../../file-format.html#SkinnedMesh">Binary format</a></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_javax.microedition.m3g.Node"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Fields inherited from class javax.microedition.m3g.<A HREF="../../../javax/microedition/m3g/Node.html" title="class in javax.microedition.m3g">Node</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../javax/microedition/m3g/Node.html#NONE">NONE</A>, <A HREF="../../../javax/microedition/m3g/Node.html#ORIGIN">ORIGIN</A>, <A HREF="../../../javax/microedition/m3g/Node.html#X_AXIS">X_AXIS</A>, <A HREF="../../../javax/microedition/m3g/Node.html#Y_AXIS">Y_AXIS</A>, <A HREF="../../../javax/microedition/m3g/Node.html#Z_AXIS">Z_AXIS</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/SkinnedMesh.html#SkinnedMesh(javax.microedition.m3g.VertexBuffer, javax.microedition.m3g.IndexBuffer[], javax.microedition.m3g.Appearance[], javax.microedition.m3g.Group)">SkinnedMesh</A></B>(<A HREF="../../../javax/microedition/m3g/VertexBuffer.html" title="class in javax.microedition.m3g">VertexBuffer</A>&nbsp;vertices,
            <A HREF="../../../javax/microedition/m3g/IndexBuffer.html" title="class in javax.microedition.m3g">IndexBuffer</A>[]&nbsp;submeshes,
            <A HREF="../../../javax/microedition/m3g/Appearance.html" title="class in javax.microedition.m3g">Appearance</A>[]&nbsp;appearances,
            <A HREF="../../../javax/microedition/m3g/Group.html" title="class in javax.microedition.m3g">Group</A>&nbsp;skeleton)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a new SkinnedMesh with the given vertices, submeshes and
 skeleton. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/SkinnedMesh.html#SkinnedMesh(javax.microedition.m3g.VertexBuffer, javax.microedition.m3g.IndexBuffer, javax.microedition.m3g.Appearance, javax.microedition.m3g.Group)">SkinnedMesh</A></B>(<A HREF="../../../javax/microedition/m3g/VertexBuffer.html" title="class in javax.microedition.m3g">VertexBuffer</A>&nbsp;vertices,
            <A HREF="../../../javax/microedition/m3g/IndexBuffer.html" title="class in javax.microedition.m3g">IndexBuffer</A>&nbsp;submesh,
            <A HREF="../../../javax/microedition/m3g/Appearance.html" title="class in javax.microedition.m3g">Appearance</A>&nbsp;appearance,
            <A HREF="../../../javax/microedition/m3g/Group.html" title="class in javax.microedition.m3g">Group</A>&nbsp;skeleton)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructs a new SkinnedMesh with the given vertices, submesh and
 skeleton. </TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/SkinnedMesh.html#addTransform(javax.microedition.m3g.Node, int, int, int)">addTransform</A></B>(<A HREF="../../../javax/microedition/m3g/Node.html" title="class in javax.microedition.m3g">Node</A>&nbsp;bone,
             int&nbsp;weight,
             int&nbsp;firstVertex,
             int&nbsp;numVertices)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Associates a weighted transformation, or "bone", with a range
 of vertices in this SkinnedMesh. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/SkinnedMesh.html#getBoneTransform(javax.microedition.m3g.Node, javax.microedition.m3g.Transform)">getBoneTransform</A></B>(<A HREF="../../../javax/microedition/m3g/Node.html" title="class in javax.microedition.m3g">Node</A>&nbsp;bone,
                 <A HREF="../../../javax/microedition/m3g/Transform.html" title="class in javax.microedition.m3g">Transform</A>&nbsp;transform)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="new">Returns the at-rest transformation for a bone
 node.  </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/SkinnedMesh.html#getBoneVertices(javax.microedition.m3g.Node, int[], float[])">getBoneVertices</A></B>(<A HREF="../../../javax/microedition/m3g/Node.html" title="class in javax.microedition.m3g">Node</A>&nbsp;bone,
                int[]&nbsp;indices,
                float[]&nbsp;weights)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="new">Returns the number of vertices influenced by
 the given bone, filling in the vertices and their weights to
 the given arrays. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../javax/microedition/m3g/Group.html" title="class in javax.microedition.m3g">Group</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/SkinnedMesh.html#getSkeleton()">getSkeleton</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the skeleton Group of this SkinnedMesh. </TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_javax.microedition.m3g.Mesh"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class javax.microedition.m3g.<A HREF="../../../javax/microedition/m3g/Mesh.html" title="class in javax.microedition.m3g">Mesh</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../javax/microedition/m3g/Mesh.html#getAppearance(int)">getAppearance</A>, <A HREF="../../../javax/microedition/m3g/Mesh.html#getIndexBuffer(int)">getIndexBuffer</A>, <A HREF="../../../javax/microedition/m3g/Mesh.html#getSubmeshCount()">getSubmeshCount</A>, <A HREF="../../../javax/microedition/m3g/Mesh.html#getVertexBuffer()">getVertexBuffer</A>, <A HREF="../../../javax/microedition/m3g/Mesh.html#setAppearance(int, javax.microedition.m3g.Appearance)">setAppearance</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_javax.microedition.m3g.Node"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class javax.microedition.m3g.<A HREF="../../../javax/microedition/m3g/Node.html" title="class in javax.microedition.m3g">Node</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../javax/microedition/m3g/Node.html#align(javax.microedition.m3g.Node)">align</A>, <A HREF="../../../javax/microedition/m3g/Node.html#getAlignmentReference(int)">getAlignmentReference</A>, <A HREF="../../../javax/microedition/m3g/Node.html#getAlignmentTarget(int)">getAlignmentTarget</A>, <A HREF="../../../javax/microedition/m3g/Node.html#getAlphaFactor()">getAlphaFactor</A>, <A HREF="../../../javax/microedition/m3g/Node.html#getParent()">getParent</A>, <A HREF="../../../javax/microedition/m3g/Node.html#getScope()">getScope</A>, <A HREF="../../../javax/microedition/m3g/Node.html#getTransformTo(javax.microedition.m3g.Node, javax.microedition.m3g.Transform)">getTransformTo</A>, <A HREF="../../../javax/microedition/m3g/Node.html#isPickingEnabled()">isPickingEnabled</A>, <A HREF="../../../javax/microedition/m3g/Node.html#isRenderingEnabled()">isRenderingEnabled</A>, <A HREF="../../../javax/microedition/m3g/Node.html#setAlignment(javax.microedition.m3g.Node, int, javax.microedition.m3g.Node, int)">setAlignment</A>, <A HREF="../../../javax/microedition/m3g/Node.html#setAlphaFactor(float)">setAlphaFactor</A>, <A HREF="../../../javax/microedition/m3g/Node.html#setPickingEnable(boolean)">setPickingEnable</A>, <A HREF="../../../javax/microedition/m3g/Node.html#setRenderingEnable(boolean)">setRenderingEnable</A>, <A HREF="../../../javax/microedition/m3g/Node.html#setScope(int)">setScope</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_javax.microedition.m3g.Transformable"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class javax.microedition.m3g.<A HREF="../../../javax/microedition/m3g/Transformable.html" title="class in javax.microedition.m3g">Transformable</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../javax/microedition/m3g/Transformable.html#getCompositeTransform(javax.microedition.m3g.Transform)">getCompositeTransform</A>, <A HREF="../../../javax/microedition/m3g/Transformable.html#getOrientation(float[])">getOrientation</A>, <A HREF="../../../javax/microedition/m3g/Transformable.html#getScale(float[])">getScale</A>, <A HREF="../../../javax/microedition/m3g/Transformable.html#getTransform(javax.microedition.m3g.Transform)">getTransform</A>, <A HREF="../../../javax/microedition/m3g/Transformable.html#getTranslation(float[])">getTranslation</A>, <A HREF="../../../javax/microedition/m3g/Transformable.html#postRotate(float, float, float, float)">postRotate</A>, <A HREF="../../../javax/microedition/m3g/Transformable.html#preRotate(float, float, float, float)">preRotate</A>, <A HREF="../../../javax/microedition/m3g/Transformable.html#scale(float, float, float)">scale</A>, <A HREF="../../../javax/microedition/m3g/Transformable.html#setOrientation(float, float, float, float)">setOrientation</A>, <A HREF="../../../javax/microedition/m3g/Transformable.html#setScale(float, float, float)">setScale</A>, <A HREF="../../../javax/microedition/m3g/Transformable.html#setTransform(javax.microedition.m3g.Transform)">setTransform</A>, <A HREF="../../../javax/microedition/m3g/Transformable.html#setTranslation(float, float, float)">setTranslation</A>, <A HREF="../../../javax/microedition/m3g/Transformable.html#translate(float, float, float)">translate</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_javax.microedition.m3g.Object3D"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class javax.microedition.m3g.<A HREF="../../../javax/microedition/m3g/Object3D.html" title="class in javax.microedition.m3g">Object3D</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../javax/microedition/m3g/Object3D.html#addAnimationTrack(javax.microedition.m3g.AnimationTrack)">addAnimationTrack</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#animate(int)">animate</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#duplicate()">duplicate</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#find(int)">find</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getAnimationTrack(int)">getAnimationTrack</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getAnimationTrackCount()">getAnimationTrackCount</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getReferences(javax.microedition.m3g.Object3D[])">getReferences</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getUserID()">getUserID</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getUserObject()">getUserObject</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#removeAnimationTrack(javax.microedition.m3g.AnimationTrack)">removeAnimationTrack</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#setUserID(int)">setUserID</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#setUserObject(java.lang.Object)">setUserObject</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="SkinnedMesh(javax.microedition.m3g.VertexBuffer, javax.microedition.m3g.IndexBuffer, javax.microedition.m3g.Appearance, javax.microedition.m3g.Group)"><!-- --></A><H3>
SkinnedMesh</H3>
<PRE>
public <B>SkinnedMesh</B>(<A HREF="../../../javax/microedition/m3g/VertexBuffer.html" title="class in javax.microedition.m3g">VertexBuffer</A>&nbsp;vertices,
                   <A HREF="../../../javax/microedition/m3g/IndexBuffer.html" title="class in javax.microedition.m3g">IndexBuffer</A>&nbsp;submesh,
                   <A HREF="../../../javax/microedition/m3g/Appearance.html" title="class in javax.microedition.m3g">Appearance</A>&nbsp;appearance,
                   <A HREF="../../../javax/microedition/m3g/Group.html" title="class in javax.microedition.m3g">Group</A>&nbsp;skeleton)</PRE>
<DL>
<DD><p>Constructs a new SkinnedMesh with the given vertices, submesh and
 skeleton. Except for the skeleton, the behavior of this constructor is
 identical to the corresponding constructor in Mesh; refer to that for
 more information.</p>
 
 <p>No transformations are initially associated with the vertices. The
 behavior of a newly constructed SkinnedMesh is therefore equivalent
 to an ordinary Mesh.</p>
<P>
<DT><B>Parameters:</B><DD><CODE>vertices</CODE> - a VertexBuffer to use for this mesh<DD><CODE>submesh</CODE> - an IndexBuffer defining the triangle strips to draw<DD><CODE>appearance</CODE> - an Appearance to use for this mesh,
                   <span class="new">or null</span><DD><CODE>skeleton</CODE> - a Group containing the skeleton of this SkinnedMesh
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - if <code>vertices</code> is null
<DD><CODE>java.lang.NullPointerException</CODE> - if <code>submesh</code> is null
<DD><CODE>java.lang.NullPointerException</CODE> - if <code>skeleton</code> is null
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>skeleton</code>
         is a World node
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>skeleton</code>
         already has a parent</DL>
<HR>

<A NAME="SkinnedMesh(javax.microedition.m3g.VertexBuffer, javax.microedition.m3g.IndexBuffer[], javax.microedition.m3g.Appearance[], javax.microedition.m3g.Group)"><!-- --></A><H3>
SkinnedMesh</H3>
<PRE>
public <B>SkinnedMesh</B>(<A HREF="../../../javax/microedition/m3g/VertexBuffer.html" title="class in javax.microedition.m3g">VertexBuffer</A>&nbsp;vertices,
                   <A HREF="../../../javax/microedition/m3g/IndexBuffer.html" title="class in javax.microedition.m3g">IndexBuffer</A>[]&nbsp;submeshes,
                   <A HREF="../../../javax/microedition/m3g/Appearance.html" title="class in javax.microedition.m3g">Appearance</A>[]&nbsp;appearances,
                   <A HREF="../../../javax/microedition/m3g/Group.html" title="class in javax.microedition.m3g">Group</A>&nbsp;skeleton)</PRE>
<DL>
<DD><p>Constructs a new SkinnedMesh with the given vertices, submeshes and
 skeleton. Except for the skeleton, the behavior of this constructor is
 identical to the corresponding constructor in Mesh; refer to that for
 more information.</p>
 
 <p>No transformations are initially associated with the vertices. The
 behavior of a newly constructed SkinnedMesh is therefore equivalent
 to an ordinary Mesh.</p>
<P>
<DT><B>Parameters:</B><DD><CODE>vertices</CODE> - a VertexBuffer to use for all submeshes in this mesh<DD><CODE>submeshes</CODE> - an IndexBuffer array defining the submeshes to draw<DD><CODE>appearances</CODE> - an Appearance array parallel to
        <code>submeshes</code>, <span class="new">or null</span><DD><CODE>skeleton</CODE> - a Group containing the skeleton of this SkinnedMesh
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - if <code>vertices</code> is null
<DD><CODE>java.lang.NullPointerException</CODE> - if <code>submeshes</code> is null
<DD><CODE>java.lang.NullPointerException</CODE> - if any element in <code>submeshes</code>
         is null
<DD><CODE>java.lang.NullPointerException</CODE> - if <code>skeleton</code> is null
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>submeshes</code> is empty
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code class="new">(appearances != null) && (appearances.length &lt;
         submeshes.length)</code>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>skeleton</code> is a World
         node
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>skeleton</code>
         already has a parent</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="getSkeleton()"><!-- --></A><H3>
getSkeleton</H3>
<PRE>
public <A HREF="../../../javax/microedition/m3g/Group.html" title="class in javax.microedition.m3g">Group</A> <B>getSkeleton</B>()</PRE>
<DL>
<DD><p>Returns the skeleton Group of this SkinnedMesh. The skeleton
 group is set in the constructor and can not be removed or
 replaced with another Group afterwards. All transform reference
 nodes (bones) must be descendants of the skeleton group; this
 is enforced by <code>addTransform</code>.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the skeleton Group of this SkinnedMesh</DL>
</DD>
</DL>
<HR>

<A NAME="addTransform(javax.microedition.m3g.Node, int, int, int)"><!-- --></A><H3>
addTransform</H3>
<PRE>
public void <B>addTransform</B>(<A HREF="../../../javax/microedition/m3g/Node.html" title="class in javax.microedition.m3g">Node</A>&nbsp;bone,
                         int&nbsp;weight,
                         int&nbsp;firstVertex,
                         int&nbsp;numVertices)</PRE>
<DL>
<DD><p>Associates a weighted transformation, or "bone", with a range
 of vertices in this SkinnedMesh. See the transformation equation
 in the class description for how the transformations are applied
 on vertices.</p>

 <p>An integer weight is supplied as a parameter for each added
 transformation. Prior to solving the transformation equation,
 the weights are automatically normalized on a per-vertex basis
 such that the individual weights are between [0, 1] and their
 sum is 1.0. This is done by dividing each weight pertaining to
 a vertex by the sum of all weights pertaining to that vertex.
 For example, if two bones with any equal weights overlap on a
 vertex, each bone will get a final weight of 0.5.</p>

 <p>Automatic normalization of weights is convenient because it
 significantly reduces the number of times that this method must
 be called (and hence the amount of data that must be stored and
 transmitted) in cases where more than one bone is typically
 associated with each vertex.</p>
 
 <p>The same Node may appear multiple times among the bones. This
 is to allow multiple disjoint sets of vertices to be attached to
 the same bone.</p>

 <p>The number of bones that can be associated with a single vertex
 is unlimited, except for the amount of available memory. However,
 there is an implementation defined limit (N) to the number of bones
 that can actually have an effect on any single vertex. If more than
 N bones are active on a vertex, the implementation is required to
 select the N bones with highest weights. In case of a tie (multiple
 bones with equal weights competing for the last slot), the selection
 method is undefined but must be deterministic. The limit N can be
 queried from <A HREF="../../../javax/microedition/m3g/Graphics3D.html#getProperties()"><CODE>getProperties</CODE></A>.</p>

 <p>The "at-rest" transformation from this SkinnedMesh to the
 given bone is set equal to
 <code>this.getTransformTo(bone)</code>. If the at-rest
 transformation cannot be computed, an ArithmeticException is
 thrown; see <A HREF="../../../javax/microedition/m3g/Node.html#getTransformTo(javax.microedition.m3g.Node, javax.microedition.m3g.Transform)"><CODE>Node.getTransformTo</CODE></A> for
 more information.  <span class="new">If
 <code>addTransform</code> is called more than once for the same
 bone, the final at-rest transformation of that bone can become
 any of the at-rest transformations that were in effect during
 those calls.</span></p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>bone</CODE> - a node in the skeleton group to transform the vertices with<DD><CODE>weight</CODE> - weight of <code>bone</code>; any positive integer is
        accepted<DD><CODE>firstVertex</CODE> - index of the first vertex to be affected by
        <code>bone</code><DD><CODE>numVertices</CODE> - number of consecutive vertices to attach to
        the bone node
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - if <code>bone</code> is null
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>bone</code> is not the
         skeleton Group or one of its descendants
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>weight &lt;= 0</code>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>numVertices &lt;= 0</code>
<DD><CODE>java.lang.IndexOutOfBoundsException</CODE> - if <code>firstVertex &lt; 0</code>
<DD><CODE>java.lang.IndexOutOfBoundsException</CODE> - if <code>firstVertex + numVertices
         &gt; 65535</code>
<DD><CODE>java.lang.ArithmeticException</CODE> - if the at-rest transformation cannot
         be computed</DL>
</DD>
</DL>
<HR>

<A NAME="getBoneTransform(javax.microedition.m3g.Node, javax.microedition.m3g.Transform)"><!-- --></A><H3>
getBoneTransform</H3>
<PRE>
public void <B>getBoneTransform</B>(<A HREF="../../../javax/microedition/m3g/Node.html" title="class in javax.microedition.m3g">Node</A>&nbsp;bone,
                             <A HREF="../../../javax/microedition/m3g/Transform.html" title="class in javax.microedition.m3g">Transform</A>&nbsp;transform)</PRE>
<DL>
<DD><span class="new">Returns the at-rest transformation for a bone
 node.  This is the transformation stored in <code>addTransform</code>
 as described in the documentation there.</span>

 <p class="new">If the given node is in the skeleton group of
 this Mesh, but has no vertices associated with it according to
 <code>getBoneVertices</code>, the returned transformation is
 undefined.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>bone</CODE> - <span class="new">the bone node</span><DD><CODE>transform</CODE> - <span class="new">the Transform object to
        receive the bone transformation</span>
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - <span class="new">if <code>bone</code>
         is null</span>
<DD><CODE>java.lang.NullPointerException</CODE> - <span class="new">if <code>transform</code>
         is null</span>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - <span class="new">if <code>bone</code>
         is not in the skeleton group of this mesh</span><DT><B>Since:</B></DT>
  <DD><span class="new">M3G 1.1</span></DD>
<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/SkinnedMesh.html#getBoneVertices(javax.microedition.m3g.Node, int[], float[])"><CODE><span class="new">getBoneVertices</span></CODE></A>, 
<A HREF="../../../javax/microedition/m3g/SkinnedMesh.html#addTransform(javax.microedition.m3g.Node, int, int, int)"><CODE><span class="new">addTransform</span></CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getBoneVertices(javax.microedition.m3g.Node, int[], float[])"><!-- --></A><H3>
getBoneVertices</H3>
<PRE>
public int <B>getBoneVertices</B>(<A HREF="../../../javax/microedition/m3g/Node.html" title="class in javax.microedition.m3g">Node</A>&nbsp;bone,
                           int[]&nbsp;indices,
                           float[]&nbsp;weights)</PRE>
<DL>
<DD><span class="new">Returns the number of vertices influenced by
 the given bone, filling in the vertices and their weights to
 the given arrays. If either or both of the arrays are null,
 only the number of vertices is returned.</span>
 
 <p class="new">Each bone node may be associated with disjoint
 sets of vertices via multiple <code>addTransform</code> calls.
 The vertices are therefore returned as explicit vertex indices
 with corresponding per-vertex bone weights.  The order of the
 returned index-weight pairs is implementation-dependent.
 Duplicate indices and indices with zero weight are not
 returned. The returned weights are normalized so that all
 weights (from all contributing bones) corresponding to a single
 vertex sum to one.</span>

 <p class="new">Implementations are only required to associate
 with a vertex the N bones with the highest weights, where N is
 the maximum number of transformations per vertex as queried
 from <code>Graphics3D.getProperties</code>. For the other
 bones, a weight of zero can be assumed.  The returned weights
 for each vertex must still sum to one.</p>

 <p class="new">The minimum precision requirements for vertex
 weights are less than the general requirements given in the
 package description.  The returned weights must have a
 precision equivalent to a minimum internal precision of 8-bit
 fixed point.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>bone</CODE> - <span class="new">the bone node</span><DD><CODE>indices</CODE> - <span class="new">an array to store the vertex indices,
        or null to only query the number of vertices that will be
        returned</span><DD><CODE>weights</CODE> - <span class="new">an array to store the vertex weights,
        or null to only query the number of vertices that will be
        returned</span>
<DT><B>Returns:</B><DD><span class="new">the number of vertices influenced by <code>bone</code></span>
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - <span class="new">if <code>bone</code> is null</span>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - <span class="new">if <code>bone</code> is not in
         the skeleton group of this mesh</span>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - <span class="new">if neither of
         <code>indices</code> and <code>weights</code> is null, and the
         length of either is less than the number of vertices
         queried</span><DT><B>Since:</B></DT>
  <DD><span class="new">M3G 1.1</span></DD>
<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/SkinnedMesh.html#addTransform(javax.microedition.m3g.Node, int, int, int)"><CODE><span class="new">addTransform</span></CODE></A>, 
<A HREF="../../../javax/microedition/m3g/SkinnedMesh.html#getBoneTransform(javax.microedition.m3g.Node, javax.microedition.m3g.Transform)"><CODE><span class="new">getBoneTransform</span></CODE></A></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/SkinnedMesh.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<EM><B>M3G 1.1 -- Jun 22, 2005</B></EM></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../javax/microedition/m3g/RayIntersection.html" title="class in javax.microedition.m3g"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../javax/microedition/m3g/Sprite3D.html" title="class in javax.microedition.m3g"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SkinnedMesh.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_javax.microedition.m3g.Node">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<EM>Copyright &copy; 2005 Nokia Corporation. See the <a href="../../../overview-summary.html#Copyright">Copyright Notice</a> for details.</EM>
</BODY>
</HTML>
