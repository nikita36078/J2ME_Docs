<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_08) on Thu Jun 30 13:21:20 EEST 2005 -->
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<TITLE>
AnimationController (Mobile 3D Graphics API (M3G))
</TITLE>

<META NAME="keywords" CONTENT="javax.microedition.m3g.AnimationController class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="AnimationController (Mobile 3D Graphics API (M3G))";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AnimationController.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<EM><B>M3G 1.1 -- Jun 22, 2005</B></EM></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../javax/microedition/m3g/AnimationTrack.html" title="class in javax.microedition.m3g"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AnimationController.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
javax.microedition.m3g</FONT>
<BR>
Class AnimationController</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><A HREF="../../../javax/microedition/m3g/Object3D.html" title="class in javax.microedition.m3g">javax.microedition.m3g.Object3D</A>
      <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><B>javax.microedition.m3g.AnimationController</B>
</PRE>
<HR>
<DL>
<DT>public class <B>AnimationController</B><DT>extends <A HREF="../../../javax/microedition/m3g/Object3D.html" title="class in javax.microedition.m3g">Object3D</A></DL>

<P>
<p>Controls the position, speed and weight of an animation sequence.</p>

<p>In anything other than the simplest scenes, an animation sequence
will require control of more than one property of more than one object.
For example, a jointed figure performing a single gesture is usually
thought of as a single animation, yet it involves the coordinated
control of the position and orientation of many different objects.</p>

<p>We define an <i>animation sequence</i> to mean a set of individual
AnimationTracks that are controlled by a single AnimationController.
Each AnimationTrack object contains all the data required to control
a single animatable property on one target object.</p>

<p>An AnimationController object enables its associated animation
sequence as a whole to be paused, stopped, restarted, fast-forwarded,
rewound, arbitrarily repositioned, or deactivated. More formally, it
defines a linear mapping from world time to sequence time.</p>

<p>The detailed behaviour of how the data flows through the animation
system as a whole is documented in the <A HREF="../../../javax/microedition/m3g/AnimationTrack.html" title="class in javax.microedition.m3g"><CODE>AnimationTrack</CODE></A> class.</p>

<H3>Animation application</H3>

<p>In both immediate and retained mode, animations are explicitly applied
to target objects by calling the <code>animate</code> method on the target
Object3D itself. This re-evaluates the values of all object properties that
have one or more animations attached. Animations are also applied to the
children of the target object, so the application is free to choose
between calling <code>myWorld.animate</code> to animate everything in
<code>myWorld</code> at once, or applying animations to more fine-grained
groups of objects individually.</p>

<p>Animation controllers have an active interval, specified by minimum
and maximum world time values, during which the animation controller
is active. Animations controlled by inactive animation controllers
have no effect on their target objects and are simply ignored during
animation application.</p>

<H3>Animation weighting</H3>

<p>Each animation controller has a <i>weight</i> associated with
it. The contributions of all active animations targeting the same
property at the same time are blended together by their respective
weights. Formally, the value of a scalar property P as a function of
weights w<sub>i</sub> and contributions P<sub>i</sub> is:</p>

<ul>
P = sum [ w<sub>i </sub> P<sub>i</sub>&nbsp;]
</ul>

<p>For vector-valued properties, the above formula is applied for each
vector component separately.</p>

<p>For most types of animation, the simple weighted sum as shown above
is sufficient, but for orientation values the implementation is
required to normalize the resulting quaternion. <span class="new">The
quaternion must be normalized even if there is only one active
animation controller, and that controller has unit weight, so that no
actual weighting or blending takes place. Note also that the individual
contributing quaternions P<sub>i</sub> must <i>not</i> be normalized
prior to weighting.</span></p>

<H3>Timing and speed control</H3>

<p>AnimationController specifies a linear mapping between <i>world
time</i>, passed in to <code>Object3D.animate</code>, and <i>sequence
time</i> that is used in sampling the associated keyframe data.</p>

<p>The sequence time is calculated directly from the given world time
at each call to <code>animate</code>, instead of storing it internally.
This is to avoid undesirable accumulation of rounding errors and any
artifacts potentially resulting from that. It also simplifies the usage
of the animation system by making it effectively stateless (as opposed
to a traditional state machine design).</p>

<p>The mapping from world time to sequence time is parameterized by
three constants, specified in AnimationController, and one variable,
the world time, that is passed in to <code>animate</code>. The formula
for calculating the sequence time t<sub>s</sub> corresponding to a
given world time t<sub>w</sub> is:</p>

<ul>
t<sub>s </sub> = t<sub>sref </sub> + s (t<sub>w </sub> - t<sub>wref </sub>)
</ul>
<p>where</p>
<ul>
t<sub>s </sub> = the computed sequence time<br>
t<sub>w </sub> = the given world time<br>
t<sub>sref </sub> = the reference sequence time<br>
t<sub>wref </sub> = the reference world time<br>
s = the speed; sequence time per world time<br>
</ul>

<p>The <i>reference point</i> (t<sub>wref</sub>, t<sub>sref</sub>) is
specified with the <code>setPosition</code> method and the speed with
the <code>setSpeed</code> method (note that setting the speed may also
change the reference point).</p>

<p>Sequence time can be visualized, in a coordinate system where world
time is on the horizontal and sequence time on the vertical axis, as a
line having slope s and passing through the point (t<sub>wref</sub>,
t<sub>sref</sub>).</p>

<p>As an example of the relationship between world time and sequence
time, imagine a world where the current time is 5000 milliseconds
since the start. An animation was started (from 0 ms sequence time) at
3000 ms, running at half speed. The animation was started 2000 ms ago,
but because the speed is 0.5, the actual required sequence time
t<sub>sref</sub> is 1000 ms.  Here, we would have t<sub>w</sub> = 5000
ms, t<sub>wref</sub> = 3000 ms, t<sub>sref</sub> = 0 ms, and s = 0.5
in the formula above.</p>

<p>Note that the unit of time is not explicitly specified anywhere in
the API or the file format. It is strongly recommended that
applications and content creation tools express times in milliseconds
by default. Arbitrary units can, however, be used in specific
applications if mandated by range or precision requirements.</p>

<h3 class="orphan">Synchronized animation</h3>

<p>We assume that synchronization of animation with other media
types is only based on the world time passed from the controlling
application. No synchronization events or other mechanisms are
provided for this purpose. In the case of synchronizing animation
to music, for example, the current elapsed time is often available
directly from the music player library.</p>

<H3>Example usage</H3>

<p>As an example of using animation, consider a case where we want
a light source to pulsate between red and green, moving along a
curved path. In both immediate and retained mode, this involves
creating keyframe sequences and associating them with the light
node, as illustrated in Example 1 below.</p>

<p>To apply the animation to the light object in our rendering
loop, we must call the <code>animate</code> method, as shown in
Example 2.</p>

<a NAME="Example"></a>
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><a href="../../../file-format.html#AnimationController">Binary format</a>, 
<A HREF="../../../javax/microedition/m3g/AnimationTrack.html" title="class in javax.microedition.m3g"><CODE>AnimationTrack</CODE></A>, 
<A HREF="../../../javax/microedition/m3g/KeyframeSequence.html" title="class in javax.microedition.m3g"><CODE>KeyframeSequence</CODE></A>, 
<A HREF="../../../javax/microedition/m3g/Object3D.html" title="class in javax.microedition.m3g"><CODE>Object3D</CODE></A><DT><b>Examples:</b><DD><div class="example_title">(1) Creating an animation.

</div><pre class="example"><span class="example_class">Light</span> light = <span class="example_reserved">new</span> <span class="example_class">Light</span>();	<span class="example_comment">// Create a light node</span>

<span class="example_comment">// Load a motion path from a stream, assuming it's the first</span>
<span class="example_comment">// object there</span>

<span class="example_class">Object</span>3D[] objects = <span class="example_class">Loader</span>.load(<span class="example_string">"http://www.ex.com/ex.m3g"</span>);
<span class="example_class">KeyframeSequence</span> motion = (<span class="example_class">KeyframeSequence</span>) objects[0];

<span class="example_comment">// Create a color keyframe sequence, with keyframes at 0 ms</span>
<span class="example_comment">// and 500 ms, and a total duration of 1000 ms. The animate</span>
<span class="example_comment">// method will throw an exception if it encounters a</span>
<span class="example_comment">// KeyframeSequence whose duration has not been set or whose</span>
<span class="example_comment">// keyframes are out of order. Note that the Loader</span>
<span class="example_comment">// automatically validates any sequences that are loaded from</span>
<span class="example_comment">// a file.</span>

<span class="example_class">KeyframeSequence</span> blinking = <span class="example_reserved">new</span> <span class="example_class">KeyframeSequence</span>(2, 3, 
                                      <span class="example_class">KeyframeSequence</span>.<span class="example_constant">LINEAR</span>);
blinking.setKeyframe(0,   0, <span class="example_reserved">new</span> <span class="example_type">float</span>[] { 1.0f, 0.0f, 0.0f });
blinking.setKeyframe(1, 500, <span class="example_reserved">new</span> <span class="example_type">float</span>[] { 0.0f, 1.0f, 0.0f });
blinking.setDuration(1000);

<span class="example_class">AnimationTrack</span> blink = <span class="example_reserved">new</span> <span class="example_class">AnimationTrack</span>(blinking, 
                                         <span class="example_class">AnimationTrack</span>.<span class="example_constant">COLOR</span>);
<span class="example_class">AnimationTrack</span> move = <span class="example_reserved">new</span> <span class="example_class">AnimationTrack</span>(motion, 
                                   <span class="example_class">AnimationTrack</span>.<span class="example_constant">TRANSLATION</span>);
light.addAnimationTrack(blink);
light.addAnimationTrack(move);

<span class="example_comment">// Create an AnimationController and make it control both the</span>
<span class="example_comment">// blinking and the movement of our light</span>

<span class="example_class">AnimationController</span> lightAnim = <span class="example_reserved">new</span> <span class="example_class">AnimationController</span>();
blink.setController(lightAnim);
move.setController(lightAnim);

<span class="example_comment">// Start the animation when world time reaches 2 seconds, stop</span>
<span class="example_comment">// at 5 s.  There is only one reference point for this</span>
<span class="example_comment">// animation: sequence time must be zero at world time 2000</span>
<span class="example_comment">// ms. The animation will be running at normal speed (1.0, the</span>
<span class="example_comment">// default).</span>

lightAnim.setActiveInterval(2000, 5000);
lightAnim.setPosition(0, 2000);</pre><div class="example_title">(2) Applying the animation during rendering.

</div><pre class="example">appTime += 30;		<span class="example_comment">// advance time by 30 ms each frame</span>
light.animate(appTime);

<span class="example_comment">// Assume 'myGraphics3D' is the Graphics3D object we draw into.</span>
<span class="example_comment">// In immediate mode, node transforms are ignored, so we get</span>
<span class="example_comment">// our animated transformation into a local Transform object,</span>
<span class="example_comment">// "lightToWorld". As its name implies, the transformation is</span>
<span class="example_comment">// from the Light node's local coordinates to world space.</span>

light.getTransform(lightToWorld);
myGraphics3D.resetLights();
myGraphics3D.addLight(light, lightToWorld);</pre></DD></DD></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->


<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/AnimationController.html#AnimationController()">AnimationController</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new AnimationController object. </TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/AnimationController.html#getActiveIntervalEnd()">getActiveIntervalEnd</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves the ending time of the current active interval of
 this animation controller, in world time units. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/AnimationController.html#getActiveIntervalStart()">getActiveIntervalStart</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves the starting time of the current active interval
 of this animation controller, in world time units. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/AnimationController.html#getPosition(int)">getPosition</A></B>(int&nbsp;worldTime)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves the sequence time that corresponds to the given
 world time. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/AnimationController.html#getRefWorldTime()">getRefWorldTime</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="new">Returns the current reference world time</span>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/AnimationController.html#getSpeed()">getSpeed</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves the currently set playback speed of this
 animation controller.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;float</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/AnimationController.html#getWeight()">getWeight</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves the currently set blending weight for this animation
 controller.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/AnimationController.html#setActiveInterval(int, int)">setActiveInterval</A></B>(int&nbsp;start,
                  int&nbsp;end)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the world time interval during which this animation controller
 is active.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/AnimationController.html#setPosition(float, int)">setPosition</A></B>(float&nbsp;sequenceTime,
            int&nbsp;worldTime)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets a new playback position, relative to world time, for
 this animation controller. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/AnimationController.html#setSpeed(float, int)">setSpeed</A></B>(float&nbsp;speed,
         int&nbsp;worldTime)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets a new playback speed for this animation. </TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../javax/microedition/m3g/AnimationController.html#setWeight(float)">setWeight</A></B>(float&nbsp;weight)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the blending weight for this animation controller. </TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_javax.microedition.m3g.Object3D"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class javax.microedition.m3g.<A HREF="../../../javax/microedition/m3g/Object3D.html" title="class in javax.microedition.m3g">Object3D</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../javax/microedition/m3g/Object3D.html#addAnimationTrack(javax.microedition.m3g.AnimationTrack)">addAnimationTrack</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#animate(int)">animate</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#duplicate()">duplicate</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#find(int)">find</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getAnimationTrack(int)">getAnimationTrack</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getAnimationTrackCount()">getAnimationTrackCount</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getReferences(javax.microedition.m3g.Object3D[])">getReferences</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getUserID()">getUserID</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#getUserObject()">getUserObject</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#removeAnimationTrack(javax.microedition.m3g.AnimationTrack)">removeAnimationTrack</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#setUserID(int)">setUserID</A>, <A HREF="../../../javax/microedition/m3g/Object3D.html#setUserObject(java.lang.Object)">setUserObject</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="AnimationController()"><!-- --></A><H3>
AnimationController</H3>
<PRE>
public <B>AnimationController</B>()</PRE>
<DL>
<DD><p>Creates a new AnimationController object. The default values
 for the new object are:</p>
 
 <ul>
 <li>active interval: [0, 0) (always active)</li>
 <li>blending weight: 1.0</li>
 <li>speed: 1.0</li>
 <li>reference point: (0, 0)</li>
 </ul>
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="setActiveInterval(int, int)"><!-- --></A><H3>
setActiveInterval</H3>
<PRE>
public void <B>setActiveInterval</B>(int&nbsp;start,
                              int&nbsp;end)</PRE>
<DL>
<DD><p>Sets the world time interval during which this animation controller
 is active.</p>

 <p>This animation controller will subsequently be <i>active</i> when
 the world time t is such that <code>start &lt;= t &lt; end</code>, and
 inactive outside of that range. As a special case, if <code>start</code>
 and <code>end</code> are set to the same value, this animation
 controller is always active.</p>

 <p>Note that changing the active interval has no effect on the mapping
 from world time to sequence time.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>start</CODE> - the starting time of the active interval, in
        world time units (inclusive)<DD><CODE>end</CODE> - the ending time of the active interval, in
        world time units (exclusive)
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>start &gt; end</code><DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/AnimationController.html#getActiveIntervalStart()"><CODE>getActiveIntervalStart</CODE></A>, 
<A HREF="../../../javax/microedition/m3g/AnimationController.html#getActiveIntervalEnd()"><CODE>getActiveIntervalEnd</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getActiveIntervalStart()"><!-- --></A><H3>
getActiveIntervalStart</H3>
<PRE>
public int <B>getActiveIntervalStart</B>()</PRE>
<DL>
<DD><p>Retrieves the starting time of the current active interval
 of this animation controller, in world time units. The value
 returned is the same that was last set with
 <code>setActiveInterval</code>, or if it has not been called
 yet, the default value set at construction.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the starting time of the active interval<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/AnimationController.html#setActiveInterval(int, int)"><CODE>setActiveInterval</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getActiveIntervalEnd()"><!-- --></A><H3>
getActiveIntervalEnd</H3>
<PRE>
public int <B>getActiveIntervalEnd</B>()</PRE>
<DL>
<DD><p>Retrieves the ending time of the current active interval of
 this animation controller, in world time units. The value
 returned is the same that was last set with
 <code>setActiveInterval</code>, or if it has not been called
 yet, the default value set at construction.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the ending time of the active interval<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/AnimationController.html#setActiveInterval(int, int)"><CODE>setActiveInterval</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="setSpeed(float, int)"><!-- --></A><H3>
setSpeed</H3>
<PRE>
public void <B>setSpeed</B>(float&nbsp;speed,
                     int&nbsp;worldTime)</PRE>
<DL>
<DD><p>Sets a new playback speed for this animation. The speed is set as
 a factor of the nominal speed of the animation: 1.0 is normal playback
 speed (as specified by the keyframe times in the associated animation
 tracks), 2.0 is double speed, and -1.0 is reverse playback at normal
 speed. A speed of 0.0 freezes the animation.</p>

 <p>The speed setting effectively specifies how much to advance the
 internal playback position of this animation for a given increment
 in the global world time.</p>

 <p>The internal reference point is modified so that sequence time at
 the given world time remains unchanged. This allows the application
 to change the speed without causing the animation to "jump" forward
 or backward. To get the desired effect, the application should pass
 its current world time to this method. This is the time that the
 application has most recently used in <code>animate</code>, or the
 time that it is next going to use.</p>

 <p>The reference point (t<sub>wref</sub>, t<sub>sref</sub>) and
 speed (s) are updated based on the given world time and speed as
 follows:</p>

 <ul>
 t<sub>wref</sub>' = worldTime<br>
 t<sub>sref</sub>' = getPosition(worldTime)<br>
 s' = speed
 </ul>

 <p>Note that the computation of the new reference sequence time
 takes place before updating the speed. See the class description
 for the formula that <code>getPosition</code> uses, and for more
 discussion on animation timing.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>speed</CODE> - new playback speed; 1.0 is normal speed<DD><CODE>worldTime</CODE> - reference world time; the value of sequence
        time at this point will remain constant during the speed
        change<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/AnimationController.html#getSpeed()"><CODE>getSpeed</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getSpeed()"><!-- --></A><H3>
getSpeed</H3>
<PRE>
public float <B>getSpeed</B>()</PRE>
<DL>
<DD><p>Retrieves the currently set playback speed of this
 animation controller.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the current playback speed<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/AnimationController.html#setSpeed(float, int)"><CODE>setSpeed</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="setPosition(float, int)"><!-- --></A><H3>
setPosition</H3>
<PRE>
public void <B>setPosition</B>(float&nbsp;sequenceTime,
                        int&nbsp;worldTime)</PRE>
<DL>
<DD><p>Sets a new playback position, relative to world time, for
 this animation controller. This sets the internal reference
 point (t<sub>wref</sub>, t<sub>sref</sub>) to
 (<code>worldTime</code>, <code>sequenceTime</code>)
 to shift the animation to the new position.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sequenceTime</CODE> - the desired playback position in sequence
        time units<DD><CODE>worldTime</CODE> - the world time at which the sequence time
        must be equal to <code>sequenceTime</code><DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/AnimationController.html#getPosition(int)"><CODE>getPosition</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getPosition(int)"><!-- --></A><H3>
getPosition</H3>
<PRE>
public float <B>getPosition</B>(int&nbsp;worldTime)</PRE>
<DL>
<DD><p>Retrieves the sequence time that corresponds to the given
 world time. The returned value is computed with the formula
 given in the class description. Note that because the result
 may be a fractional number, it is returned as a float, not
 integer.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>worldTime</CODE> - world time to get the corresponding sequence time of
<DT><B>Returns:</B><DD>animation sequence position in number of time units
         elapsed since the beginning of this animation, until
         <code>worldTime</code><DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/AnimationController.html#setPosition(float, int)"><CODE>setPosition</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getRefWorldTime()"><!-- --></A><H3>
getRefWorldTime</H3>
<PRE>
public int <B>getRefWorldTime</B>()</PRE>
<DL>
<DD><span class="new">Returns the current reference world time</span>.
<P>
<DD><DL>

<DT><B>Returns:</B><DD><span class="new">the current reference world time</span><DT><B>Since:</B></DT>
  <DD><span class="new">M3G 1.1</span></DD>
<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/AnimationController.html#setPosition(float, int)"><CODE><span class="new">setPosition</span></CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="setWeight(float)"><!-- --></A><H3>
setWeight</H3>
<PRE>
public void <B>setWeight</B>(float&nbsp;weight)</PRE>
<DL>
<DD><p>Sets the blending weight for this animation controller. The
 blending weight must be positive or zero. Setting the weight to
 zero disables this animation controller; that is, the controller
 is subsequently not active even within its active range. If the
 weight is non-zero, the animations controlled by this controller
 contribute to their target properties as described in the class
 description.</p>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>weight</CODE> - the new blending weight
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if <code>weight &lt; 0</code><DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/AnimationController.html#getWeight()"><CODE>getWeight</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getWeight()"><!-- --></A><H3>
getWeight</H3>
<PRE>
public float <B>getWeight</B>()</PRE>
<DL>
<DD><p>Retrieves the currently set blending weight for this animation
 controller.</p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the current blending weight<DT><B>See Also:</B><DD><A HREF="../../../javax/microedition/m3g/AnimationController.html#setWeight(float)"><CODE>setWeight</CODE></A></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AnimationController.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<EM><B>M3G 1.1 -- Jun 22, 2005</B></EM></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../javax/microedition/m3g/AnimationTrack.html" title="class in javax.microedition.m3g"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AnimationController.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<EM>Copyright &copy; 2005 Nokia Corporation. See the <a href="../../../overview-summary.html#Copyright">Copyright Notice</a> for details.</EM>
</BODY>
</HTML>
